{"ast":null,"code":"import { createCommentVNode as _createCommentVNode, createElementVNode as _createElementVNode, resolveDynamicComponent as _resolveDynamicComponent, openBlock as _openBlock, createBlock as _createBlock, renderList as _renderList, Fragment as _Fragment, createElementBlock as _createElementBlock, toDisplayString as _toDisplayString, normalizeClass as _normalizeClass, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\";\nconst _withScopeId = n => (_pushScopeId(\"data-v-344b6033\"), n = n(), _popScopeId(), n);\nconst _hoisted_1 = {\n  style: {\n    \"width\": \"100%\"\n  }\n};\nconst _hoisted_2 = {\n  class: \"radar_bar\"\n};\nconst _hoisted_3 = {\n  ref: \"radarContainer\",\n  class: \"radarbox\"\n};\nconst _hoisted_4 = {\n  class: \"showdata\"\n};\nconst _hoisted_5 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"p\", {\n  class: \"font\"\n}, \"分享数据\", -1 /* HOISTED */));\nconst _hoisted_6 = {\n  class: \"content_box\"\n};\nconst _hoisted_7 = [\"onClick\"];\nconst _hoisted_8 = {\n  class: \"up\"\n};\nconst _hoisted_9 = [\"src\"];\nconst _hoisted_10 = {\n  class: \"name\"\n};\nconst _hoisted_11 = {\n  class: \"down\"\n};\nconst _hoisted_12 = {\n  class: \"data\"\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_createElementVNode(\"div\", _hoisted_2, [_createCommentVNode(\" 雷达图容器 \"), _createElementVNode(\"div\", _hoisted_3, null, 512 /* NEED_PATCH */), _createCommentVNode(\" 柱状图容器 \"), (_openBlock(), _createBlock(_resolveDynamicComponent($setup.cold)))]), _createElementVNode(\"div\", _hoisted_4, [_hoisted_5, _createElementVNode(\"div\", _hoisted_6, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList($setup.manuData, (item, index) => {\n    return _openBlock(), _createElementBlock(\"div\", {\n      class: _normalizeClass([\"content_row\", {\n        'selected-box': $setup.selectedId === item.id\n      }]),\n      key: index\n    }, [_createElementVNode(\"div\", {\n      onClick: $event => $setup.selectSpecificData(item.id)\n    }, [_createElementVNode(\"div\", _hoisted_8, [_createElementVNode(\"img\", {\n      src: item.imgSrc,\n      alt: \"\"\n    }, null, 8 /* PROPS */, _hoisted_9), _createElementVNode(\"div\", _hoisted_10, _toDisplayString(item.name), 1 /* TEXT */)]), _createElementVNode(\"div\", _hoisted_11, [_createElementVNode(\"div\", _hoisted_12, _toDisplayString(item.data), 1 /* TEXT */)])], 8 /* PROPS */, _hoisted_7)], 2 /* CLASS */);\n  }), 128 /* KEYED_FRAGMENT */))])]), _createElementVNode(\"div\", null, [(_openBlock(), _createBlock(_resolveDynamicComponent($setup.headache)))])]);\n}","map":{"version":3,"names":["style","class","ref","_createElementVNode","_createElementBlock","_hoisted_1","_hoisted_2","_createCommentVNode","_hoisted_3","_createBlock","_resolveDynamicComponent","$setup","cold","_hoisted_4","_hoisted_5","_hoisted_6","_Fragment","_renderList","manuData","item","index","_normalizeClass","selectedId","id","key","onClick","$event","selectSpecificData","_hoisted_8","src","imgSrc","alt","_hoisted_10","_toDisplayString","name","_hoisted_11","_hoisted_12","data","headache"],"sources":["D:\\有渔\\前端源码\\YouyuBBS-Q - 副本\\youyu-lyn-qtnew-vision-new-2024.1.14\\src\\page\\CreateCenter\\components\\TheData\\ShareData.vue"],"sourcesContent":["<template>\r\n  <div style=\"width: 100%;\">\r\n    <div class=\"radar_bar\">\r\n        <!-- 雷达图容器 -->\r\n        <div ref=\"radarContainer\" class=\"radarbox\"></div>\r\n        <!-- 柱状图容器 -->\r\n        <component :is = cold></component>\r\n    </div>\r\n    <div class=\"showdata\">\r\n        <p class=\"font\">分享数据</p>\r\n        <div class=\"content_box\">\r\n            <div class=\"content_row\" :class=\"{ 'selected-box': selectedId === item.id }\" v-for=\"(item, index) in manuData\" :key=\"index\">\r\n                <div @click=\"selectSpecificData(item.id)\">\r\n                    <div class=\"up\">\r\n                        <img :src=\"item.imgSrc\" alt=\"\">\r\n                        <div class=\"name\">{{ item.name }}</div>\r\n                    </div>\r\n                    <div class=\"down\">\r\n                        <div class=\"data\" >{{ item.data }}</div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n    <div >\r\n        <component :is = headache></component>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { ElMessage } from 'element-plus';\r\nimport axios from '@/utils/request';\r\nimport { ref, onMounted,computed } from 'vue';\r\nimport * as echarts from 'echarts';\r\nimport favoriteImg from '@/assets/FavoriteBefore.svg'\r\nimport commentImg from '@/assets/Comment.svg'\r\nimport likeImg from '@/assets/LikeBefore.svg'\r\nimport CommentData from '@/page/CreateCenter/components/TheData/ShareDataPage/CommentData'\r\nimport FavoriteData from '@/page/CreateCenter/components/TheData/ShareDataPage/FavoriteData'\r\nimport LikeData from '@/page/CreateCenter/components/TheData/ShareDataPage/LikeData'\r\nimport CommentDataRatio from '@/page/CreateCenter/components/TheData/ShareDataRatio/CommentData'\r\nimport FavoriteDataRatio from '@/page/CreateCenter/components/TheData/ShareDataRatio/FavoriteData'\r\nimport LikeDataRatio from '@/page/CreateCenter/components/TheData/ShareDataRatio/LikeData'\r\n\r\nconst userId = localStorage.getItem(\"userId\"); // 获取用户ID\r\nconst userCreateData = ref([]);\r\nconst radarContainer = ref(null);\r\nconst headache = ref(FavoriteData);\r\nconst cold = ref(FavoriteDataRatio);\r\nconst user = ref({});\r\n\r\n// 添加一个响应式属性来存储当前选中的项目 ID\r\nconst selectedId = ref(0); // 默认为0，即收藏数\r\n\r\nconst manuData = computed(() => [\r\n    { id: 0, name: '收藏数', data: userCreateData.value.shareFavorite, imgSrc: favoriteImg},\r\n    { id: 1, name: '评论数', data: userCreateData.value.shareComment , imgSrc: commentImg},\r\n    { id: 2, name: '点赞数', data: userCreateData.value.shareLike, imgSrc: likeImg},\r\n]);\r\n\r\nconst selectSpecificData = (type) =>{\r\n    selectedId.value = type; // 更新选中的ID\r\n    getRecentCreatedata(type);\r\n}\r\n\r\nconst getRecentCreatedata =(type) =>{\r\n    if(type == 0){\r\n        headache.value = FavoriteData;\r\n        cold.value = FavoriteDataRatio;\r\n    }else if(type == 1){\r\n        headache.value = CommentData;\r\n        cold.value = CommentDataRatio;\r\n    }else if(type == 2){\r\n        headache.value = LikeData;\r\n        cold.value = LikeDataRatio;\r\n    }\r\n}\r\n\r\n\r\n// 获取用户信息\r\nconst fetchAvatar = async () => {\r\n    try {\r\n        const response = await axios.get(`/users/${userId}`);\r\n        if(response.data.code === 1){\r\n            user.value = response.data.data;\r\n            user.value.manuscript = Number(user.value.shareCount);\r\n        }else if(response.data.code === 0 && response.data.msg){\r\n            ElMessage.error(response.data.msg.toString());\r\n        }else{\r\n            ElMessage.error('获取用户信息失败');\r\n        }\r\n    } catch (error) {\r\n        console.error(\"获取用户信息失败\", error);\r\n        ElMessage.error('获取用户信息失败');\r\n    }\r\n};\r\n\r\n\r\n//获取用户稿件数据\r\nasync function getCreatedata() {\r\n  try {\r\n    const response = await axios.get('/sharedata')\r\n    if(response.data.code === 1){\r\n        userCreateData.value = response.data.data;\r\n        // ElMessage.success('获取用户稿件数据成功');\r\n    }else if(response.data.code === 0 && response.data.msg){\r\n        ElMessage.error(response.data.msg.toString());\r\n    }else{\r\n        console.error(\"获取用户稿件数据失败\");\r\n        ElMessage.error(\"获取用户稿件数据失败\");\r\n    }\r\n  } catch (error) {\r\n    console.error(\"获取用户稿件数据失败\", error); \r\n    ElMessage.error(\"获取用户稿件数据失败\");\r\n  }\r\n}\r\n\r\n\r\nonMounted(async () => {\r\n    await fetchAvatar();\r\n    await getCreatedata();\r\n    // 雷达图配置\r\n    const radarOption = {\r\n        title: {\r\n        text: '我的表现'\r\n        },\r\n        tooltip: {},\r\n        radar: {\r\n            //指示器\r\n            indicator: [\r\n                { name: '评论数', max: 150 },\r\n                { name: '投稿', max: 150 },\r\n                { name: '点赞数', max: 150 },\r\n                { name: '收藏数', max: 150 },\r\n            ]\r\n        },\r\n        series: [{\r\n            name: 'A vs B',\r\n            type: 'radar',\r\n            data: [\r\n                { \r\n                    value: [userCreateData.value.shareComment,user.value.manuscript, userCreateData.value.shareLike,  userCreateData.value.shareFavorite],\r\n                    name: 'A',\r\n                    //设置填充面积\r\n                    areaStyle: {\r\n                        color: 'rgba(128, 128, 128, 0.3)'\r\n                    } \r\n                },\r\n                // { \r\n                //     value: [35, 30, 40, 11], \r\n                //     name: 'B',\r\n                //     areaStyle: {\r\n                //         color: 'rgba(128, 128, 128, 0.3)'\r\n                //     }\r\n                // },\r\n                // {   \r\n                //     value: [78, 105, 13, 78], \r\n                //     name: 'C' ,\r\n                //     areaStyle: {\r\n                //         color: 'rgba(128, 128, 128, 0.3)'\r\n                //     }\r\n                // }\r\n            ]\r\n        }]\r\n    };\r\n\r\n    // 初始化图表\r\n    const radarChart = echarts.init(radarContainer.value);\r\n    radarChart.setOption(radarOption);\r\n});\r\n</script>\r\n\r\n<style scoped>\r\n.radar_bar{\r\n    display: flex;\r\n    width: 960px;\r\n    justify-content: space-between;\r\n    margin: 10px auto 40px;\r\n}\r\n.radarbox,\r\n.barbox,\r\n.showdata,\r\n.linechart{\r\n    border: 1px solid #eaeaea;\r\n    box-shadow: 0px 0px 20px 0px rgba(96, 111, 160, 0.25), 0px 4px 4px 0px rgb(0 0 0 / 21%);\r\n    border-radius: 20px;\r\n    padding: 20px 30px;\r\n}\r\n.radarbox,\r\n.barbox{\r\n    width: 370px;\r\n    height: 260px;\r\n}\r\n.showdata,\r\n.linechart{\r\n    width: 900px;\r\n    margin: 20px auto 40px; \r\n}\r\n.showdata{\r\n    height: 180px;\r\n}\r\n.font{\r\n    font-size: 18px;\r\n    font-weight: 700;\r\n}\r\n.content_box {\r\n    display: flex;\r\n    justify-content: center;\r\n    flex-wrap: wrap;\r\n    gap: 25px 50px;\r\n    margin-bottom: 1rem;\r\n    margin-top: 2rem;\r\n}\r\n.content_row {\r\n    width: 170px;\r\n    height: 70px;\r\n    background-color: #FBFBFB;\r\n    border-radius: 10px;\r\n    padding: 15px;\r\n}\r\n.content_row:hover,\r\n.selected-box{\r\n    background-color: #F5F7FF;\r\n    cursor: pointer;\r\n}\r\n.up,\r\n.down{\r\n    display: flex;\r\n    align-items: center;\r\n    gap: 5px;\r\n}\r\n.up img,\r\n.name,\r\n.data{\r\n    display: inline-block;\r\n}\r\n.up img{\r\n    width: 20px;\r\n    height: 20px;\r\n}\r\n.name{\r\n    /* color: #ACACAC; */\r\n    color: #2d2d2d;\r\n}\r\n.down {\r\n    justify-content: center;\r\n    margin-top: 15px;\r\n}\r\n.data{\r\n    color:#606FA0; \r\n    font-size: larger; \r\n    font-weight: 600; \r\n    text-align: center;\r\n}\r\n.linebox{\r\n    width: 100%;\r\n    height: 300px;\r\n}\r\n</style>\r\n"],"mappings":";;;EACOA,KAAoB,EAApB;IAAA;EAAA;AAAoB;;EAClBC,KAAK,EAAC;AAAW;;EAEbC,GAAG,EAAC,gBAAgB;EAACD,KAAK,EAAC;;;EAI/BA,KAAK,EAAC;AAAU;gEACjBE,mBAAA,CAAwB;EAArBF,KAAK,EAAC;AAAM,GAAC,MAAI;;EACfA,KAAK,EAAC;AAAa;;;EAGPA,KAAK,EAAC;AAAI;;;EAENA,KAAK,EAAC;AAAM;;EAEhBA,KAAK,EAAC;AAAM;;EACRA,KAAK,EAAC;AAAM;;uBAjBvCG,mBAAA,CA0BM,OA1BNC,UA0BM,GAzBJF,mBAAA,CAKM,OALNG,UAKM,GAJFC,mBAAA,WAAc,EACdJ,mBAAA,CAAiD,OAAjDK,UAAiD,+BACjDD,mBAAA,WAAc,G,cACdE,YAAA,CAAkCC,wBAAA,CAAjBC,MAAA,CAAAC,IAAI,I,GAEzBT,mBAAA,CAeM,OAfNU,UAeM,GAdFC,UAAwB,EACxBX,mBAAA,CAYM,OAZNY,UAYM,I,kBAXFX,mBAAA,CAUMY,SAAA,QAAAC,WAAA,CAV+FN,MAAA,CAAAO,QAAQ,GAAxBC,IAAI,EAAEC,KAAK;yBAAhGhB,mBAAA,CAUM;MAVDH,KAAK,EAAAoB,eAAA,EAAC,aAAa;QAAA,gBAA2BV,MAAA,CAAAW,UAAU,KAAKH,IAAI,CAACI;MAAE;MAAuCC,GAAG,EAAEJ;QACjHjB,mBAAA,CAQM;MARAsB,OAAK,EAAAC,MAAA,IAAEf,MAAA,CAAAgB,kBAAkB,CAACR,IAAI,CAACI,EAAE;QACnCpB,mBAAA,CAGM,OAHNyB,UAGM,GAFFzB,mBAAA,CAA+B;MAAzB0B,GAAG,EAAEV,IAAI,CAACW,MAAM;MAAEC,GAAG,EAAC;yCAC5B5B,mBAAA,CAAuC,OAAvC6B,WAAuC,EAAAC,gBAAA,CAAlBd,IAAI,CAACe,IAAI,iB,GAElC/B,mBAAA,CAEM,OAFNgC,WAEM,GADFhC,mBAAA,CAAwC,OAAxCiC,WAAwC,EAAAH,gBAAA,CAAlBd,IAAI,CAACkB,IAAI,iB;sCAMnDlC,mBAAA,CAEM,e,cADFM,YAAA,CAAsCC,wBAAA,CAArBC,MAAA,CAAA2B,QAAQ,I"},"metadata":{},"sourceType":"module","externalDependencies":[]}