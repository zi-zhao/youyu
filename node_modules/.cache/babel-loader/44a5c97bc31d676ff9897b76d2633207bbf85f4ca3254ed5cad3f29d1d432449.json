{"ast":null,"code":"import { ElMessage } from 'element-plus';\nimport { ref, watchEffect } from 'vue';\nimport { compressImage } from '@/utils/fileService';\nimport { getArticleCOSPermission, getArticleCoveragePermission } from '@/utils/cosService';\nimport { useRouter, useRoute } from 'vue-router';\nconst CHUNK_SIZE = 5 * 1024 * 1024;\n\n// (上传图片)当点击按钮时触发文件输入框\n\nexport default {\n  __name: 'PictureAndAttachment',\n  props: {\n    Submit: String\n  },\n  setup(__props, {\n    expose: __expose\n  }) {\n    __expose();\n    const props = __props;\n    const router = useRouter();\n    const route = useRoute();\n    const watchType = ref(0);\n    const articleId = parseInt(route.params.id, 10); //路径中的文章ID\n    //设置上传图片\n    const filePictureName = ref();\n    const imagePreviews = ref([]);\n    const imageInput = ref(null);\n    const selectedImages = ref([]);\n\n    // 设置上传文件\n    const fileName = ref(\"\");\n    const fileExtension = ref(\"\");\n    const fileInput = ref(null);\n    const fileSize = ref();\n    const selectedFiles = ref([]);\n    const fileCharge = ref();\n    const fileCost = ref();\n    const requiredCoin = ref(0); //附件支付（鱼饵）\n    const requiredPoint = ref(0); //附件支付（渔币）\n    const triggerImageUpload = () => {\n      if (selectedImages.value.length < 2) {\n        imageInput.value.click();\n      } else {\n        ElMessage.error('只能提交一张照片');\n      }\n    };\n\n    //  (上传图片)当文件选择后处理图片\n    const handleImage = async event => {\n      const files = event.target.files;\n      for (const file of files) {\n        if (selectedImages.value.length < 2) {\n          try {\n            const timestamp = new Date().getTime(); // 获取当前时间戳\n            filePictureName.value = `${timestamp}-${file.name}`; // 在文件名前加时间戳\n            const compressedFile = await compressImage(file);\n            const reader = new FileReader();\n            reader.onload = e => {\n              imagePreviews.value.push(e.target.result);\n              selectedImages.value.push(compressedFile);\n            };\n            reader.readAsDataURL(compressedFile);\n          } catch (error) {\n            console.error(error);\n          }\n        }\n      }\n    };\n\n    //删除图片\n    const removeImage = index => {\n      selectedImages.value.splice(index, 1);\n      imagePreviews.value.splice(index, 1); // 也删除对应的预览\n    };\n\n    //发送文章主图接口\n    async function uploadArticlePicture() {\n      try {\n        await getArticleCoveragePermission(selectedImages.value[0], filePictureName.value, articleId);\n        watchType.value++;\n      } catch (error) {\n        console.error(\"保存图片失败\", error);\n        ElMessage.error('保存图片失败');\n      }\n    }\n\n    // 上传附件\n    const onFileChange = event => {\n      selectedFiles.value = [];\n      const file = event.target.files[0];\n      if (file) {\n        selectedFiles.value = [file]; // 直接将文件对象添加到 selectedFiles\n        fileName.value = file.name; // 获取并设置文件名\n        fileExtension.value = file.name.split('.').pop(); // 获取并设置文件扩展名\n        fileSize.value = file.size; // 获取并设置文件大小\n      }\n    };\n    const triggerFileInput = () => {\n      fileInput.value.click();\n    };\n\n    //向后端请求下载当前附件的许可证\n    async function getattachmentPermission() {\n      if (fileCharge.value == 0) {\n        requiredPoint.value = 0;\n        requiredCoin.value = 0;\n      } else if (fileCost.value == 0) {\n        requiredCoin.value = 0;\n      } else {\n        requiredPoint.value = 0;\n      }\n      const file = selectedFiles.value[0]; // 获取数组中的第一个文件对象\n      await getArticleCOSPermission(file, CHUNK_SIZE, articleId, fileName.value, fileSize.value, requiredCoin.value, requiredPoint.value, 1);\n    }\n    watchEffect(() => {\n      (async () => {\n        if (props.Submit == '2') {\n          await uploadArticlePicture();\n          if (selectedFiles.value > 0) {\n            await getattachmentPermission(); // 确保先执行并成功获取数据\n          } else {\n            watchType.value++;\n          }\n        }\n      })();\n      if (watchType.value == 2) {\n        router.push('/CreateCenter');\n      }\n    });\n    const __returned__ = {\n      props,\n      router,\n      route,\n      watchType,\n      articleId,\n      filePictureName,\n      imagePreviews,\n      imageInput,\n      selectedImages,\n      fileName,\n      fileExtension,\n      fileInput,\n      fileSize,\n      selectedFiles,\n      fileCharge,\n      fileCost,\n      requiredCoin,\n      requiredPoint,\n      CHUNK_SIZE,\n      triggerImageUpload,\n      handleImage,\n      removeImage,\n      uploadArticlePicture,\n      onFileChange,\n      triggerFileInput,\n      getattachmentPermission,\n      get ElMessage() {\n        return ElMessage;\n      },\n      ref,\n      watchEffect,\n      get compressImage() {\n        return compressImage;\n      },\n      get getArticleCOSPermission() {\n        return getArticleCOSPermission;\n      },\n      get getArticleCoveragePermission() {\n        return getArticleCoveragePermission;\n      },\n      get useRouter() {\n        return useRouter;\n      },\n      get useRoute() {\n        return useRoute;\n      }\n    };\n    Object.defineProperty(__returned__, '__isScriptSetup', {\n      enumerable: false,\n      value: true\n    });\n    return __returned__;\n  }\n};","map":{"version":3,"names":["ElMessage","ref","watchEffect","compressImage","getArticleCOSPermission","getArticleCoveragePermission","useRouter","useRoute","CHUNK_SIZE","props","__props","router","route","watchType","articleId","parseInt","params","id","filePictureName","imagePreviews","imageInput","selectedImages","fileName","fileExtension","fileInput","fileSize","selectedFiles","fileCharge","fileCost","requiredCoin","requiredPoint","triggerImageUpload","value","length","click","error","handleImage","event","files","target","file","timestamp","Date","getTime","name","compressedFile","reader","FileReader","onload","e","push","result","readAsDataURL","console","removeImage","index","splice","uploadArticlePicture","onFileChange","split","pop","size","triggerFileInput","getattachmentPermission","Submit"],"sources":["D:/有渔/前端源码/YouyuBBS-Q - 副本/youyu-lyn-qtnew-vision-new-2024.1.14/src/page/CreateCenter/components/WorkManagement/TheEditor/PictureAndAttachment.vue"],"sourcesContent":["<template>\r\n  <div class=\"large_submit1\">\r\n\r\n      <!-- 修改前的附件 -->\r\n      <div class=\"upload-container row\" style=\"margin-right: 200px;\">\r\n        <label for=\"fileInput\" class=\"upload-label\" style=\"margin-right: 48px;\">\r\n            修改前的附件\r\n        </label>\r\n        <div class=\"file-container\">\r\n            <div style=\"display: flex; align-items: center; gap: 5px;\">\r\n                <el-icon><Document /></el-icon>\r\n\r\n                <!-- 这里原本是 <div class=\"file-name\">{{ fileName }}</div>  记得将这里的文字改成变量-->\r\n                \r\n                <div class=\"file-name\">这里是附件的名字</div>\r\n            </div>\r\n        </div>\r\n      </div>\r\n\r\n      <!-- 上传附件 -->\r\n      <div class=\"upload-container row\" style=\"margin-right: 200px;\">\r\n        <!-- 将上传的输入框隐藏 -->\r\n        <input type=\"file\" ref=\"fileInput\" @change=\"onFileChange\" hidden>\r\n        <label for=\"fileInput\" class=\"upload-label\">\r\n            上传附件\r\n        </label>\r\n        <div class=\"file-container\" @click=\"triggerFileInput\" style=\" cursor: pointer;\">\r\n            <div v-if=\"selectedFiles.length >0\" style=\"display: flex; align-items: center; gap: 5px;\">\r\n                <el-icon><Document /></el-icon>\r\n                <div class=\"file-name\">{{ fileName }}</div>\r\n            </div>\r\n            <el-icon v-else style=\"font-size: 20px;\"><Link /></el-icon>\r\n        </div>\r\n      </div>\r\n\r\n      <div class=\"box1\" v-if=\"selectedFiles.length >0\">\r\n          <span class=\"tclass\">附件收费<span class=\"nes-star\">*</span></span>\r\n          <div class=\"my-2 flex items-center text-sm\">\r\n          <el-radio-group v-model=\"fileCharge\" class=\"radio_share\">\r\n              <el-radio label=0>免费</el-radio>\r\n              <el-radio label=1>收费</el-radio>\r\n          </el-radio-group>\r\n          </div>\r\n      </div>\r\n\r\n      <div class=\"box1\" v-show=\"fileCharge === '1'\">\r\n          <span class=\"tclass\">支付方式<span class=\"nes-star\">*</span></span>\r\n          <div class=\"my-2 flex items-center text-sm\">\r\n          <el-radio-group v-model=\"fileCost\" class=\"radio_share\">\r\n              <el-radio label=0>鱼饵</el-radio>\r\n              <el-radio label=1>渔币</el-radio>\r\n          </el-radio-group>\r\n          </div>\r\n          <div class=\"moneyInput\" v-show=\"fileCost === '0'\">\r\n              <span>需支付</span>\r\n              <el-input type=\"text\" v-model=\"requiredCoin\" placeholder=\"请填写支付数量\"></el-input>\r\n              <span>个鱼饵</span>\r\n          </div>\r\n          <div class=\"moneyInput\" v-show=\"fileCost === '1'\">\r\n              <span>需支付</span>\r\n              <el-input type=\"text\" v-model=\"requiredPoint\" placeholder=\"请填写支付数量\"></el-input>\r\n              <span>个渔币</span>\r\n          </div>\r\n      </div>\r\n\r\n      <!-- 修改前的封面图片 -->\r\n      <div class=\"upload-container row\" >\r\n          <label for=\"imageInput\" class=\"upload-label\" style=\"margin-right: 16px;position: relative;\">\r\n              修改前的封面图片\r\n          </label>\r\n          <div class=\"image-container\" >\r\n\r\n            <!-- 记得改成获取过来的图片 -->\r\n\r\n            <img src=\"@/assets/TheFirst/NewsBgi.png\" alt=\"\">\r\n          </div>\r\n      </div>\r\n\r\n      <!-- 上传封面图片 -->\r\n      <div class=\"upload-container row\" >\r\n          <label for=\"imageInput\" class=\"upload-label\" style=\"margin-right: 48px;position: relative;\">\r\n              上传封面图片<span class=\"nes-star\">*</span>\r\n          </label>\r\n          <!-- 将上传的输入框隐藏 -->\r\n          <input type=\"file\" ref=\"imageInput\"  style=\"display: none;\" @change=\"handleImage\"  >\r\n          \r\n          <div v-if=\"imagePreviews.length === 0\" @click=\"triggerImageUpload\" class=\"image-container\" style=\"cursor: pointer;\">\r\n          <el-icon  style=\"position: absolute; left: 70px; top: 70px;font-size: 40px;cursor: pointer;\"><Plus /></el-icon>\r\n          </div>\r\n          <div  class=\"pic_contain \">\r\n          <div v-for=\"(imagePreview, index) in imagePreviews\" :key=\"index\" class=\"spic\" :style=\"{ backgroundImage: `url(${imagePreview})` }\">\r\n              <el-icon  class=\"delete-btn2\" @click=\"removeImage(index)\"><CircleCloseFilled /></el-icon>\r\n          </div>\r\n          </div> \r\n      </div>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { ElMessage } from 'element-plus';\r\nimport { ref,defineProps, watchEffect} from 'vue';\r\nimport {compressImage} from '@/utils/fileService';\r\nimport {getArticleCOSPermission,getArticleCoveragePermission} from '@/utils/cosService';\r\nimport { useRouter,useRoute} from 'vue-router';\r\n\r\nconst props = defineProps({\r\nSubmit: String,\r\n});\r\nconst router = useRouter();\r\nconst route = useRoute();\r\nconst watchType = ref(0);\r\nconst articleId = parseInt(route.params.id,10);//路径中的文章ID\r\n//设置上传图片\r\nconst filePictureName = ref();\r\nconst imagePreviews = ref([]);\r\nconst imageInput = ref(null);  \r\nconst selectedImages = ref([]);\r\n\r\n// 设置上传文件\r\nconst fileName = ref(\"\");\r\nconst fileExtension = ref(\"\");\r\nconst fileInput = ref(null);  \r\nconst fileSize = ref();\r\nconst selectedFiles = ref([]);\r\n\r\nconst fileCharge = ref();\r\nconst fileCost = ref();\r\nconst requiredCoin = ref(0);//附件支付（鱼饵）\r\nconst requiredPoint = ref(0);//附件支付（渔币）\r\nconst CHUNK_SIZE = 5 * 1024 * 1024;\r\n\r\n// (上传图片)当点击按钮时触发文件输入框\r\nconst triggerImageUpload = () => {\r\n  if (selectedImages.value.length < 2) {\r\n      imageInput.value.click();\r\n  } else {\r\n      ElMessage.error('只能提交一张照片');\r\n  }\r\n};\r\n\r\n//  (上传图片)当文件选择后处理图片\r\nconst handleImage = async (event) => {\r\nconst files = event.target.files;\r\nfor (const file of files) {\r\n  if (selectedImages.value.length < 2) {\r\n    try {\r\n      const timestamp = new Date().getTime(); // 获取当前时间戳\r\n      filePictureName.value = `${timestamp}-${file.name}`; // 在文件名前加时间戳\r\n      const compressedFile = await compressImage(file);\r\n      const reader = new FileReader();\r\n      reader.onload = (e) => {\r\n        imagePreviews.value.push(e.target.result);\r\n        selectedImages.value.push(compressedFile);\r\n      };\r\n      reader.readAsDataURL(compressedFile);\r\n    } catch (error) {\r\n      console.error(error);\r\n    }\r\n  }\r\n}\r\n};\r\n\r\n//删除图片\r\nconst removeImage = (index) => {\r\n  selectedImages.value.splice(index, 1);\r\n  imagePreviews.value.splice(index, 1);  // 也删除对应的预览\r\n};\r\n\r\n\r\n//发送文章主图接口\r\nasync function uploadArticlePicture() {\r\ntry {\r\n  await getArticleCoveragePermission( selectedImages.value[0],filePictureName.value,articleId);\r\n  watchType.value++;\r\n} catch (error) {\r\n  console.error(\"保存图片失败\", error); \r\n  ElMessage.error('保存图片失败');\r\n}\r\n}\r\n\r\n// 上传附件\r\nconst onFileChange = (event) => {\r\nselectedFiles.value = [];\r\nconst file = event.target.files[0];\r\nif (file) {\r\n  selectedFiles.value = [file];  // 直接将文件对象添加到 selectedFiles\r\n  fileName.value = file.name;    // 获取并设置文件名\r\n  fileExtension.value = file.name.split('.').pop();  // 获取并设置文件扩展名\r\n  fileSize.value = file.size;    // 获取并设置文件大小\r\n}\r\n}\r\nconst triggerFileInput = () => {\r\n  fileInput.value.click();\r\n};\r\n\r\n//向后端请求下载当前附件的许可证\r\nasync function getattachmentPermission() {\r\n  if(fileCharge.value == 0){\r\n      requiredPoint.value = 0;\r\n      requiredCoin.value = 0;\r\n  }else if(fileCost.value == 0){\r\n      requiredCoin.value = 0;\r\n  }else{\r\n      requiredPoint.value = 0;\r\n  }\r\n  const file = selectedFiles.value[0]; // 获取数组中的第一个文件对象\r\n  await getArticleCOSPermission(file,CHUNK_SIZE,articleId,fileName.value,fileSize.value, requiredCoin.value, requiredPoint.value,1);\r\n}\r\n\r\n\r\nwatchEffect(() => {\r\n  (async () => { \r\n    if (props.Submit == '2') {\r\n      await uploadArticlePicture();\r\n      if( selectedFiles.value >0){\r\n        await getattachmentPermission(); // 确保先执行并成功获取数据\r\n      }else{\r\n        watchType.value++;\r\n      }\r\n    }\r\n  })();\r\n  if(watchType.value == 2){\r\n    router.push('/CreateCenter');\r\n  }\r\n});\r\n\r\n</script>\r\n\r\n<style scoped>\r\n.large_submit1{\r\n  border-radius: 4px 4px 0px 0px;\r\n  background: #fff;\r\n  box-shadow: 0px 4px 4px 0px rgba(0, 0, 0, 0.25);\r\n  width: 1020px;\r\n  padding: 24px 40px 0px;\r\n  display: flex;\r\n  flex-direction: column;\r\n  margin: 20px auto 0px;\r\n  gap:20px\r\n}\r\nlabel{\r\n  color: #606266;\r\n  font-family: Microsoft YaHei;\r\n  font-size: 16px;\r\n  margin-right: 80px;\r\n  cursor: pointer;\r\n}\r\n.upload-container {\r\n  display: flex;\r\n  align-items: center;\r\n}\r\n\r\n.upload-label {\r\n  cursor: pointer;\r\n}\r\n.file-container {\r\n  min-width: 95px;\r\n  min-height: 25px;\r\n  border: 1px solid #bbbbbb;\r\n  border-radius: 10px;\r\n  padding: 5px 15px;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n}\r\n.file-name{\r\nfont-size: 14px;\r\ncolor: #606266;\r\n}\r\n.box1{\r\ndisplay: flex;\r\nwidth: 780px;\r\nheight: 24px;\r\nalign-items: center;\r\n}\r\n.nes-star{\r\n    color: #de0000;\r\n    position: absolute;\r\n    left: -15px;\r\n    top: 2px;\r\n    font-size: 20px;\r\n}\r\n.tclass{\r\n  margin-right: 80px;\r\n  color: #606266;\r\n  position: relative;\r\n}\r\n.moneyInput{\r\n  margin-left: 94px;\r\n}\r\n.moneyInput span{\r\n  font-size: 14px;\r\n}\r\n.moneyInput .el-input{\r\n  width: 60px;\r\n  margin: 0px 5px;\r\n}\r\n.el-input__inner{\r\n  text-align: center;\r\n}\r\n.image-container {\r\n  width: 180px;\r\n  height: 180px;\r\n  border: 1px dashed #bbbbbb;\r\n  border-radius: 10px;\r\n  position: relative;\r\n}\r\n.image-container img{\r\n  width: 180px;\r\n  height: 180px;\r\n  border-radius: 10px;\r\n}\r\n.pic_contain{\r\nposition: relative;\r\n}\r\ni.delete-btn2 {\r\nposition: absolute;\r\nright: 5px;\r\ntop: 8px;\r\ncursor: pointer;\r\n}\r\n\r\n.spic{\r\n  background-size: cover;\r\n  background-repeat: no-repeat;\r\n  background-position: center center;\r\n  width: 180px;\r\n  height: 180px;\r\n  border-radius: 10px;\r\n  border: 1px dashed #bbbbbb;\r\n}\r\n.plus-sign {\r\nfont-size: 2rem;\r\n}\r\n\r\n.foot{\r\nwidth: 100%;\r\nheight: 38px;\r\nborder-radius: 8px;\r\nborder: 1px solid #DCDFE6;\r\nbackground: #FFF;\r\nposition: fixed;\r\nbottom: 0;\r\ndisplay: flex;\r\nalign-items: center;\r\npadding: 0 10px 0 10px;\r\n\r\n}\r\n.b-1{\r\ndisplay: inline-flex;\r\npadding: 8px 16px;\r\njustify-content: center;\r\nalign-items: center;\r\ngap: 16px;\r\nborder-radius: 16px;\r\nborder: 1px solid #DCDFE6;\r\nmargin-right: 10px;\r\ncursor: pointer;\r\n}\r\n.b-2{\r\ndisplay: inline-flex;\r\npadding: 8px 16px;\r\njustify-content: center;\r\nalign-items: center;\r\ngap: 16px;\r\nborder-radius: 16px;\r\nborder: #FFF;\r\nbackground: #9FA9CA;\r\ncursor: pointer;\r\n}\r\n.b-container{\r\nposition: absolute;\r\nright: 40px;\r\n}\r\n\r\n</style>"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}