{"ast":null,"code":"import { ElMessage } from 'element-plus';\nimport { ref, watch, watchEffect } from 'vue';\nimport { compressImage } from '@/utils/fileService';\nimport { getArticleCOSPermission, getArticleCoveragePermission } from '@/utils/cosService';\nimport { useRouter } from 'vue-router';\nimport YyButton from \"@/page/components/YyButton.vue\";\nconst CHUNK_SIZE = 5 * 1024 * 1024;\n\n// (上传图片)当点击按钮时触发文件输入框\n\nexport default {\n  __name: 'PictureAndAttachment',\n  props: {\n    Submit: String\n  },\n  setup(__props, {\n    expose: __expose\n  }) {\n    __expose();\n    const props = __props;\n    const router = useRouter();\n    const watchType = ref(0);\n\n    // 控制跳转弹框显示\n    const dialogRouterVisible = ref(false);\n\n    //设置上传图片\n    const filePictureName = ref();\n    const imagePreviews = ref([]);\n    const imageInput = ref(null);\n    const selectedImages = ref([]);\n\n    // 设置上传文件\n    const fileName = ref(\"\");\n    const fileExtension = ref(\"\");\n    const fileInput = ref(null);\n    const fileSize = ref();\n    const selectedFiles = ref([]);\n    const fileCharge = ref();\n    const fileCost = ref();\n    const requiredCoin = ref(0); //附件支付（鱼饵）\n    const requiredPoint = ref(0); //附件支付（渔币）\n    const triggerImageUpload = () => {\n      if (selectedImages.value.length < 2) {\n        imageInput.value.click();\n      } else {\n        ElMessage.error('只能提交一张照片');\n      }\n    };\n\n    //  (上传图片)当文件选择后处理图片\n    const handleImage = async event => {\n      const files = event.target.files;\n      for (const file of files) {\n        if (selectedImages.value.length < 2) {\n          try {\n            const timestamp = new Date().getTime(); // 获取当前时间戳\n            filePictureName.value = `${timestamp}-${file.name}`; // 在文件名前加时间戳\n            const compressedFile = await compressImage(file);\n            const reader = new FileReader();\n            reader.onload = e => {\n              imagePreviews.value.push(e.target.result);\n              selectedImages.value.push(compressedFile);\n            };\n            reader.readAsDataURL(compressedFile);\n          } catch (error) {\n            console.error(error);\n          }\n        }\n      }\n    };\n\n    //删除图片\n    const removeImage = index => {\n      selectedImages.value.splice(index, 1);\n      imagePreviews.value.splice(index, 1); // 也删除对应的预览\n    };\n\n    //发送文章主图接口\n    async function uploadArticlePicture() {\n      try {\n        const articleId = localStorage.getItem(\"articleId\"); // 获取文章ID\n        await getArticleCoveragePermission(selectedImages.value[0], filePictureName.value, articleId);\n        watchType.value++;\n      } catch (error) {\n        console.error(\"保存图片失败\", error);\n        ElMessage.error('保存图片失败');\n      }\n    }\n\n    // 上传附件\n    const onFileChange = event => {\n      selectedFiles.value = [];\n      const file = event.target.files[0];\n      if (file) {\n        selectedFiles.value = [file]; // 直接将文件对象添加到 selectedFiles\n        fileName.value = file.name; // 获取并设置文件名\n        fileExtension.value = file.name.split('.').pop(); // 获取并设置文件扩展名\n        fileSize.value = file.size; // 获取并设置文件大小\n      }\n    };\n    const triggerFileInput = () => {\n      fileInput.value.click();\n    };\n\n    //向后端请求下载当前附件的许可证\n    async function getattachmentPermission() {\n      if (fileCharge.value == 0) {\n        requiredPoint.value = 0;\n        requiredCoin.value = 0;\n      } else if (fileCost.value == 0) {\n        requiredCoin.value = 0;\n      } else {\n        requiredPoint.value = 0;\n      }\n      const articleId = localStorage.getItem(\"articleId\"); // 获取文章ID\n      const file = selectedFiles.value[0]; // 获取数组中的第一个文件对象\n      await getArticleCOSPermission(file, CHUNK_SIZE, articleId, fileName.value, fileSize.value, requiredCoin.value, requiredPoint.value, 1);\n    }\n    const goToTheMain = () => {\n      router.push('/TheMain');\n    };\n    const goToCreateCenter = () => {\n      router.push('/CreateCenter');\n    };\n    watchEffect(async () => {\n      if (props.Submit == '2') {\n        await uploadArticlePicture();\n        if (selectedFiles.value.length > 0) {\n          await getattachmentPermission(); // 确保先执行并成功获取数据\n        } else {\n          watchType.value++;\n        }\n      }\n    });\n    watch(watchType, (newValue, oldValue) => {\n      if (newValue == 2) {\n        dialogRouterVisible.value = true;\n      }\n    });\n    const __returned__ = {\n      props,\n      router,\n      watchType,\n      dialogRouterVisible,\n      filePictureName,\n      imagePreviews,\n      imageInput,\n      selectedImages,\n      fileName,\n      fileExtension,\n      fileInput,\n      fileSize,\n      selectedFiles,\n      fileCharge,\n      fileCost,\n      requiredCoin,\n      requiredPoint,\n      CHUNK_SIZE,\n      triggerImageUpload,\n      handleImage,\n      removeImage,\n      uploadArticlePicture,\n      onFileChange,\n      triggerFileInput,\n      getattachmentPermission,\n      goToTheMain,\n      goToCreateCenter,\n      get ElMessage() {\n        return ElMessage;\n      },\n      ref,\n      watch,\n      watchEffect,\n      get compressImage() {\n        return compressImage;\n      },\n      get getArticleCOSPermission() {\n        return getArticleCOSPermission;\n      },\n      get getArticleCoveragePermission() {\n        return getArticleCoveragePermission;\n      },\n      get useRouter() {\n        return useRouter;\n      },\n      YyButton\n    };\n    Object.defineProperty(__returned__, '__isScriptSetup', {\n      enumerable: false,\n      value: true\n    });\n    return __returned__;\n  }\n};","map":{"version":3,"names":["ElMessage","ref","watch","watchEffect","compressImage","getArticleCOSPermission","getArticleCoveragePermission","useRouter","YyButton","CHUNK_SIZE","props","__props","router","watchType","dialogRouterVisible","filePictureName","imagePreviews","imageInput","selectedImages","fileName","fileExtension","fileInput","fileSize","selectedFiles","fileCharge","fileCost","requiredCoin","requiredPoint","triggerImageUpload","value","length","click","error","handleImage","event","files","target","file","timestamp","Date","getTime","name","compressedFile","reader","FileReader","onload","e","push","result","readAsDataURL","console","removeImage","index","splice","uploadArticlePicture","articleId","localStorage","getItem","onFileChange","split","pop","size","triggerFileInput","getattachmentPermission","goToTheMain","goToCreateCenter","Submit","newValue","oldValue"],"sources":["D:/有渔/前端源码/YouyuBBS-Q - 副本/youyu-lyn-qtnew-vision-new-2024.1.14/src/page/TheEditor/PictureAndAttachment.vue"],"sourcesContent":["<template>\r\n    <div class=\"large_submit1\">\r\n        <div class=\"upload-container row\" style=\"margin-right: 200px;\">\r\n          <!-- 将上传的输入框隐藏 -->\r\n          <input type=\"file\" ref=\"fileInput\" @change=\"onFileChange\" hidden>\r\n          <label for=\"fileInput\" class=\"upload-label\">\r\n              上传附件\r\n          </label>\r\n          <div class=\"file-container\" @click=\"triggerFileInput\" >\r\n              <div v-if=\"selectedFiles.length >0\" style=\"display: flex; align-items: center; gap: 5px;\">\r\n                  <el-icon><Document /></el-icon>\r\n                  <div class=\"file-name\">{{ fileName }}</div>\r\n              </div>\r\n              <el-icon v-else style=\"font-size: 20px;\"><Link /></el-icon>\r\n          </div>\r\n        </div>\r\n        <div class=\"box1\" v-if=\"selectedFiles.length >0\">\r\n            <span class=\"tclass\">附件收费<span class=\"nes-star\">*</span></span>\r\n            <div class=\"my-2 flex items-center text-sm\">\r\n            <el-radio-group v-model=\"fileCharge\" class=\"radio_share\">\r\n                <el-radio label=0>免费</el-radio>\r\n                <el-radio label=1>收费</el-radio>\r\n            </el-radio-group>\r\n            </div>\r\n        </div>\r\n\r\n        <div class=\"box1\" v-show=\"fileCharge === '1'\">\r\n            <span class=\"tclass\">支付方式<span class=\"nes-star\">*</span></span>\r\n            <div class=\"my-2 flex items-center text-sm\">\r\n            <el-radio-group v-model=\"fileCost\" class=\"radio_share\">\r\n                <el-radio label=0>鱼饵</el-radio>\r\n                <el-radio label=1>渔币</el-radio>\r\n            </el-radio-group>\r\n            </div>\r\n            <div class=\"moneyInput\" v-show=\"fileCost === '0'\">\r\n                <span>需支付</span>\r\n                <el-input type=\"text\" v-model=\"requiredCoin\" placeholder=\"请填写支付数量\"></el-input>\r\n                <span>个鱼饵</span>\r\n            </div>\r\n            <div class=\"moneyInput\" v-show=\"fileCost === '1'\">\r\n                <span>需支付</span>\r\n                <el-input type=\"text\" v-model=\"requiredPoint\" placeholder=\"请填写支付数量\"></el-input>\r\n                <span>个渔币</span>\r\n            </div>\r\n        </div>\r\n        \r\n        <div class=\"upload-container row\" >\r\n            <label for=\"imageInput\" class=\"upload-label\" style=\"margin-right: 48px;position: relative;\">\r\n                上传封面图片<span class=\"nes-star\">*</span>\r\n            </label>\r\n            <!-- 将上传的输入框隐藏 -->\r\n            <input type=\"file\" ref=\"imageInput\"  style=\"display: none;\" @change=\"handleImage\"  >\r\n            \r\n            <div v-if=\"imagePreviews.length === 0\" @click=\"triggerImageUpload\" class=\"image-container\" >\r\n            <el-icon  style=\"position: absolute; left: 70px; top: 70px;font-size: 40px;cursor: pointer;\"><Plus /></el-icon>\r\n            </div>\r\n            <div  class=\"pic_contain \">\r\n            <div v-for=\"(imagePreview, index) in imagePreviews\" :key=\"index\" class=\"spic\" :style=\"{ backgroundImage: `url(${imagePreview})` }\">\r\n                <el-icon  class=\"delete-btn2\" @click=\"removeImage(index)\"><CircleCloseFilled /></el-icon>\r\n            </div>\r\n            </div> \r\n        </div>\r\n    </div>\r\n    <div>\r\n      <el-dialog v-model=\"dialogRouterVisible\" style=\"margin-top: 25vh;\" title=\"\" center>\r\n        <div style=\"font-size: 18px;display: inline-block;text-align: center;line-height: 1.6;\">您的文章已提交至管理员处审核，审核通过后将被发表。您可以在创作中心查看您的作品哦！</div>\r\n        <div style=\"font-size: 20px;font-weight: 700;display: inline-block;\">点击跳转至</div>\r\n        <div style=\"display: flex;gap: 20px;\">\r\n          <YyButton theme=\"purple\" style=\"padding: 6px 15px;\" @click=\"goToTheMain\">主页</YyButton>\r\n          <YyButton theme=\"gray\" style=\"padding: 6px 15px;\" @click=\"goToCreateCenter\">创作中心</YyButton>\r\n        </div>\r\n      </el-dialog>\r\n    </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { ElMessage } from 'element-plus';\r\nimport { ref,defineProps,watch, watchEffect} from 'vue';\r\nimport {compressImage} from '@/utils/fileService';\r\nimport {getArticleCOSPermission,getArticleCoveragePermission} from '@/utils/cosService';\r\nimport { useRouter } from 'vue-router';\r\nimport YyButton from \"@/page/components/YyButton.vue\";\r\n\r\nconst props = defineProps({\r\n  Submit: String,\r\n});\r\nconst router = useRouter();\r\nconst watchType = ref(0);\r\n\r\n// 控制跳转弹框显示\r\nconst dialogRouterVisible = ref(false)\r\n\r\n//设置上传图片\r\nconst filePictureName = ref();\r\nconst imagePreviews = ref([]);\r\nconst imageInput = ref(null);  \r\nconst selectedImages = ref([]);\r\n\r\n// 设置上传文件\r\nconst fileName = ref(\"\");\r\nconst fileExtension = ref(\"\");\r\nconst fileInput = ref(null);  \r\nconst fileSize = ref();\r\nconst selectedFiles = ref([]);\r\n\r\nconst fileCharge = ref();\r\nconst fileCost = ref();\r\nconst requiredCoin = ref(0);//附件支付（鱼饵）\r\nconst requiredPoint = ref(0);//附件支付（渔币）\r\nconst CHUNK_SIZE = 5 * 1024 * 1024;\r\n\r\n// (上传图片)当点击按钮时触发文件输入框\r\nconst triggerImageUpload = () => {\r\n  if (selectedImages.value.length < 2) {\r\n    imageInput.value.click();\r\n  } else {\r\n    ElMessage.error('只能提交一张照片');\r\n  }\r\n};\r\n\r\n//  (上传图片)当文件选择后处理图片\r\nconst handleImage = async (event) => {\r\n  const files = event.target.files;\r\n  for (const file of files) {\r\n    if (selectedImages.value.length < 2) {\r\n      try {\r\n        const timestamp = new Date().getTime(); // 获取当前时间戳\r\n        filePictureName.value = `${timestamp}-${file.name}`; // 在文件名前加时间戳\r\n        const compressedFile = await compressImage(file);\r\n        const reader = new FileReader();\r\n        reader.onload = (e) => {\r\n          imagePreviews.value.push(e.target.result);\r\n          selectedImages.value.push(compressedFile);\r\n        };\r\n        reader.readAsDataURL(compressedFile);\r\n      } catch (error) {\r\n        console.error(error);\r\n      }\r\n    }\r\n  }\r\n};\r\n\r\n  //删除图片\r\nconst removeImage = (index) => {\r\n    selectedImages.value.splice(index, 1);\r\n    imagePreviews.value.splice(index, 1);  // 也删除对应的预览\r\n};\r\n\r\n\r\n//发送文章主图接口\r\nasync function uploadArticlePicture() {\r\n  try {\r\n    const articleId = localStorage.getItem(\"articleId\"); // 获取文章ID\r\n    await getArticleCoveragePermission( selectedImages.value[0],filePictureName.value,articleId);\r\n    watchType.value++;\r\n  } catch (error) {\r\n      console.error(\"保存图片失败\", error); \r\n      ElMessage.error('保存图片失败');\r\n  }\r\n}\r\n\r\n// 上传附件\r\nconst onFileChange = (event) => {\r\n  selectedFiles.value = [];\r\n  const file = event.target.files[0];\r\n  if (file) {\r\n    selectedFiles.value = [file];  // 直接将文件对象添加到 selectedFiles\r\n    fileName.value = file.name;    // 获取并设置文件名\r\n    fileExtension.value = file.name.split('.').pop();  // 获取并设置文件扩展名\r\n    fileSize.value = file.size;    // 获取并设置文件大小\r\n  }\r\n}\r\nconst triggerFileInput = () => {\r\n    fileInput.value.click();\r\n};\r\n\r\n//向后端请求下载当前附件的许可证\r\nasync function getattachmentPermission() {\r\n    if(fileCharge.value == 0){\r\n        requiredPoint.value = 0;\r\n        requiredCoin.value = 0;\r\n    }else if(fileCost.value == 0){\r\n        requiredCoin.value = 0;\r\n    }else{\r\n        requiredPoint.value = 0;\r\n    }\r\n    const articleId = localStorage.getItem(\"articleId\"); // 获取文章ID\r\n    const file = selectedFiles.value[0]; // 获取数组中的第一个文件对象\r\n    await getArticleCOSPermission(file,CHUNK_SIZE,articleId,fileName.value,fileSize.value, requiredCoin.value, requiredPoint.value,1);\r\n}\r\n\r\n\r\nconst goToTheMain = () =>{\r\n  router.push('/TheMain')\r\n}\r\nconst goToCreateCenter = () =>{\r\n  router.push('/CreateCenter')\r\n}\r\n\r\n\r\nwatchEffect(async () => {\r\n  if (props.Submit == '2') {\r\n    await uploadArticlePicture();\r\n    if(selectedFiles.value.length > 0){\r\n      await getattachmentPermission(); // 确保先执行并成功获取数据\r\n    } else {\r\n      watchType.value++;\r\n    }\r\n  }\r\n});\r\n\r\nwatch(watchType, (newValue, oldValue) => {\r\n  if(newValue == 2){\r\n    dialogRouterVisible.value = true;\r\n  }\r\n});\r\n\r\n</script>\r\n\r\n<style scoped>\r\n.large_submit1{\r\n    border-radius: 4px 4px 0px 0px;\r\n    background: #fff;\r\n    box-shadow: 0px 4px 4px 0px rgba(0, 0, 0, 0.25);\r\n    width: 1020px;\r\n    padding: 24px 40px 0px;\r\n    display: flex;\r\n    flex-direction: column;\r\n    margin: 20px auto 0px;\r\n    gap:20px\r\n}\r\nlabel{\r\n    color: #606266;\r\n    font-family: Microsoft YaHei;\r\n    font-size: 16px;\r\n    margin-right: 80px;\r\n    cursor: pointer;\r\n}\r\n.upload-container {\r\n    display: flex;\r\n    align-items: center;\r\n}\r\n\r\n.upload-label {\r\n    cursor: pointer;\r\n}\r\n.file-container {\r\n    min-width: 95px;\r\n    min-height: 25px;\r\n    border: 1px solid #bbbbbb;\r\n    border-radius: 10px;\r\n    padding: 5px 15px;\r\n    cursor: pointer;\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n}\r\n.file-name{\r\n  font-size: 14px;\r\n  color: #606266;\r\n}\r\n.box1{\r\n  display: flex;\r\n  width: 780px;\r\n  height: 24px;\r\n  align-items: center;\r\n}\r\n.nes-star{\r\n    color: #de0000;\r\n    position: absolute;\r\n    left: -15px;\r\n    top: 2px;\r\n    font-size: 20px;\r\n}\r\n.tclass{\r\n    margin-right: 80px;\r\n    color: #606266;\r\n    position: relative;\r\n}\r\n.moneyInput{\r\n    margin-left: 94px;\r\n}\r\n.moneyInput span{\r\n    font-size: 14px;\r\n}\r\n.moneyInput .el-input{\r\n    width: 60px;\r\n    margin: 0px 5px;\r\n}\r\n.el-input__inner{\r\n    text-align: center;\r\n}\r\n.image-container {\r\n    width: 180px;\r\n    height: 180px;\r\n    border: 1px dashed #bbbbbb;\r\n    border-radius: 10px;\r\n    cursor: pointer;\r\n    position: relative;\r\n}\r\n.pic_contain{\r\n  position: relative;\r\n}\r\ni.delete-btn2 {\r\n  position: absolute;\r\n  right: 5px;\r\n  top: 8px;\r\n  cursor: pointer;\r\n}\r\n\r\n.spic{\r\n    background-size: cover;\r\n    background-repeat: no-repeat;\r\n    background-position: center center;\r\n    width: 180px;\r\n    height: 180px;\r\n    border-radius: 10px;\r\n    border: 1px dashed #bbbbbb;\r\n}\r\n.plus-sign {\r\n  font-size: 2rem;\r\n}\r\n\r\n.foot{\r\n  width: 100%;\r\n  height: 38px;\r\n  border-radius: 8px;\r\n  border: 1px solid #DCDFE6;\r\n  background: #FFF;\r\n  position: fixed;\r\n  bottom: 0;\r\n  display: flex;\r\n  align-items: center;\r\n  padding: 0 10px 0 10px;\r\n  \r\n}\r\n.b-1{\r\n  display: inline-flex;\r\n  padding: 8px 16px;\r\n  justify-content: center;\r\n  align-items: center;\r\n  gap: 16px;\r\n  border-radius: 16px;\r\n  border: 1px solid #DCDFE6;\r\n  margin-right: 10px;\r\n  cursor: pointer;\r\n}\r\n.b-2{\r\n  display: inline-flex;\r\n  padding: 8px 16px;\r\n  justify-content: center;\r\n  align-items: center;\r\n  gap: 16px;\r\n  border-radius: 16px;\r\n  border: #FFF;\r\n  background: #9FA9CA;\r\n  cursor: pointer;\r\n}\r\n.b-container{\r\n  position: absolute;\r\n  right: 40px;\r\n}\r\n:deep .el-dialog--center .el-dialog__body {\r\n    display: flex;\r\n    flex-direction: column;\r\n    align-items: center;\r\n    width: 50%;\r\n    gap: 2rem;\r\n    margin: 0 auto;\r\n}\r\n</style>"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}