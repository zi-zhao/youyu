{"ast":null,"code":"\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nexports.__esModule = true;\nexports.default = creator;\nvar _regenerator = _interopRequireDefault(require(\"@babel/runtime/regenerator\"));\nvar _asyncToGenerator2 = _interopRequireDefault(require(\"@babel/runtime/helpers/asyncToGenerator\"));\nvar _parser = _interopRequireDefault(require(\"./parser\"));\nvar _deepAssign = require(\"../../utils/deep-assign\");\nvar _util = require(\"../../utils/util\");\nfunction getPreviewEl(el) {\n  var previewElClass = 'v-md-editor-preview';\n  return el.classList.contains(previewElClass) ? el : el.querySelector(\".\" + previewElClass);\n}\nfunction creator(mermaid) {\n  function handleMdChange() {\n    return _handleMdChange.apply(this, arguments);\n  }\n  function _handleMdChange() {\n    _handleMdChange = (0, _asyncToGenerator2.default)( /*#__PURE__*/_regenerator.default.mark(function _callee() {\n      var previewEl, eles;\n      return _regenerator.default.wrap(function _callee$(_context) {\n        while (1) switch (_context.prev = _context.next) {\n          case 0:\n            if (_util.inBrowser) {\n              _context.next = 2;\n              break;\n            }\n            return _context.abrupt(\"return\");\n          case 2:\n            _context.next = 4;\n            return this.$nextTick();\n          case 4:\n            previewEl = getPreviewEl(this.$el);\n            eles = previewEl.querySelectorAll('.v-md-mermaid');\n            if (eles.length) {\n              _context.next = 8;\n              break;\n            }\n            return _context.abrupt(\"return\");\n          case 8:\n            mermaid.run({\n              nodes: eles\n            });\n          case 9:\n          case \"end\":\n            return _context.stop();\n        }\n      }, _callee, this);\n    }));\n    return _handleMdChange.apply(this, arguments);\n  }\n  return function createMermaidPlugin(_temp) {\n    var _ref = _temp === void 0 ? {} : _temp,\n      _ref$mermaidInitializ = _ref.mermaidInitializeOptions,\n      mermaidInitializeOptions = _ref$mermaidInitializ === void 0 ? {} : _ref$mermaidInitializ;\n    var initialize = {\n      altFontFamily: 'sans-serif',\n      flowchart: {\n        htmlLabels: true,\n        useMaxWidth: true\n      },\n      fontFamily: 'sans-serif',\n      gantt: {\n        leftPadding: 75,\n        rightPadding: 20\n      },\n      securityLevel: 'loose',\n      sequence: {\n        boxMargin: 8,\n        diagramMarginX: 8,\n        diagramMarginY: 8,\n        useMaxWidth: true\n      },\n      startOnLoad: false\n    };\n    (0, _deepAssign.deepAssign)(initialize, mermaidInitializeOptions);\n    return {\n      install: function install(VMdEditor) {\n        VMdEditor.vMdParser.use(_parser.default);\n        if (!VMdEditor.mixins) VMdEditor.mixins = [];\n        var mixin = {\n          created: function created() {\n            mermaid.initialize(initialize);\n          },\n          watch: {\n            html: {\n              immediate: true,\n              handler: handleMdChange\n            }\n          }\n        };\n        if (VMdEditor.name === 'v-md-editor') {\n          VMdEditor.Preview.mixins.push(mixin);\n        } else {\n          VMdEditor.mixins.push(mixin);\n        }\n      }\n    };\n  };\n}","map":{"version":3,"names":["_interopRequireDefault","require","exports","__esModule","default","creator","_regenerator","_asyncToGenerator2","_parser","_deepAssign","_util","getPreviewEl","el","previewElClass","classList","contains","querySelector","mermaid","handleMdChange","_handleMdChange","apply","arguments","mark","_callee","previewEl","eles","wrap","_callee$","_context","prev","next","inBrowser","abrupt","$nextTick","$el","querySelectorAll","length","run","nodes","stop","createMermaidPlugin","_temp","_ref","_ref$mermaidInitializ","mermaidInitializeOptions","initialize","altFontFamily","flowchart","htmlLabels","useMaxWidth","fontFamily","gantt","leftPadding","rightPadding","securityLevel","sequence","boxMargin","diagramMarginX","diagramMarginY","startOnLoad","deepAssign","install","VMdEditor","vMdParser","use","mixins","mixin","created","watch","html","immediate","handler","name","Preview","push"],"sources":["D:/有渔/前端源码/YouyuBBS-Q - 副本/youyu-lyn-qtnew-vision-new-2024.1.14/node_modules/@kangc/v-md-editor/lib/plugins/mermaid/creator.js"],"sourcesContent":["\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nexports.__esModule = true;\nexports.default = creator;\n\nvar _regenerator = _interopRequireDefault(require(\"@babel/runtime/regenerator\"));\n\nvar _asyncToGenerator2 = _interopRequireDefault(require(\"@babel/runtime/helpers/asyncToGenerator\"));\n\nvar _parser = _interopRequireDefault(require(\"./parser\"));\n\nvar _deepAssign = require(\"../../utils/deep-assign\");\n\nvar _util = require(\"../../utils/util\");\n\nfunction getPreviewEl(el) {\n  var previewElClass = 'v-md-editor-preview';\n  return el.classList.contains(previewElClass) ? el : el.querySelector(\".\" + previewElClass);\n}\n\nfunction creator(mermaid) {\n  function handleMdChange() {\n    return _handleMdChange.apply(this, arguments);\n  }\n\n  function _handleMdChange() {\n    _handleMdChange = (0, _asyncToGenerator2.default)( /*#__PURE__*/_regenerator.default.mark(function _callee() {\n      var previewEl, eles;\n      return _regenerator.default.wrap(function _callee$(_context) {\n        while (1) switch (_context.prev = _context.next) {\n          case 0:\n            if (_util.inBrowser) {\n              _context.next = 2;\n              break;\n            }\n\n            return _context.abrupt(\"return\");\n\n          case 2:\n            _context.next = 4;\n            return this.$nextTick();\n\n          case 4:\n            previewEl = getPreviewEl(this.$el);\n            eles = previewEl.querySelectorAll('.v-md-mermaid');\n\n            if (eles.length) {\n              _context.next = 8;\n              break;\n            }\n\n            return _context.abrupt(\"return\");\n\n          case 8:\n            mermaid.run({\n              nodes: eles\n            });\n\n          case 9:\n          case \"end\":\n            return _context.stop();\n        }\n      }, _callee, this);\n    }));\n    return _handleMdChange.apply(this, arguments);\n  }\n\n  return function createMermaidPlugin(_temp) {\n    var _ref = _temp === void 0 ? {} : _temp,\n        _ref$mermaidInitializ = _ref.mermaidInitializeOptions,\n        mermaidInitializeOptions = _ref$mermaidInitializ === void 0 ? {} : _ref$mermaidInitializ;\n\n    var initialize = {\n      altFontFamily: 'sans-serif',\n      flowchart: {\n        htmlLabels: true,\n        useMaxWidth: true\n      },\n      fontFamily: 'sans-serif',\n      gantt: {\n        leftPadding: 75,\n        rightPadding: 20\n      },\n      securityLevel: 'loose',\n      sequence: {\n        boxMargin: 8,\n        diagramMarginX: 8,\n        diagramMarginY: 8,\n        useMaxWidth: true\n      },\n      startOnLoad: false\n    };\n    (0, _deepAssign.deepAssign)(initialize, mermaidInitializeOptions);\n    return {\n      install: function install(VMdEditor) {\n        VMdEditor.vMdParser.use(_parser.default);\n        if (!VMdEditor.mixins) VMdEditor.mixins = [];\n        var mixin = {\n          created: function created() {\n            mermaid.initialize(initialize);\n          },\n          watch: {\n            html: {\n              immediate: true,\n              handler: handleMdChange\n            }\n          }\n        };\n\n        if (VMdEditor.name === 'v-md-editor') {\n          VMdEditor.Preview.mixins.push(mixin);\n        } else {\n          VMdEditor.mixins.push(mixin);\n        }\n      }\n    };\n  };\n}"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}