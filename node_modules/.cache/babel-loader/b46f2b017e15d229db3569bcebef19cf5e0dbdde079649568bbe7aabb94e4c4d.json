{"ast":null,"code":"import { ref, onMounted, watch } from 'vue';\nimport AllCare from \"../last/AllCare.vue\";\nimport AllLover from \"../last/AllLover.vue\";\nimport { useRouter } from 'vue-router';\nimport { ElMessage } from 'element-plus';\nimport axios from '@/utils/request';\nimport { PageTitle } from '@/utils/fileService.js';\nexport default {\n  __name: 'HeLove',\n  setup(__props, {\n    expose: __expose\n  }) {\n    __expose();\n    const setPageTitle = PageTitle('正在加载...');\n    const router = useRouter();\n    const userId = localStorage.getItem(\"userId\"); // 获取用户ID\n    const userName = localStorage.getItem(\"userName\"); // 获取用户名\n    const user = ref({});\n    const currentComponent = ref(AllCare); // 默认显示 AllCare 组件\n    const currentTab = ref(0); // 默认选中全部关注\n\n    setPageTitle(`${userName} 的个人主页 - 云联知渔`);\n    function setTab(value) {\n      if (value === 0) {\n        currentComponent.value = AllCare;\n      } else if (value === 1) {\n        currentComponent.value = AllLover;\n      }\n      currentTab.value = value; // 更新当前选中的选项\n    }\n    const back = () => {\n      // 使用 router.push() 导航到 '/PersonalPage/helover'\n      router.push('/PersonalPage');\n    };\n\n    // 获取用户信息\n    const fetchAvatar = async () => {\n      try {\n        const response = await axios.get(`/users/${userId}`);\n        if (response.data.code === 1) {\n          user.value = response.data.data;\n        } else if (response.data.code === 0 && response.data.msg) {\n          ElMessage.error(response.data.msg.toString());\n        } else {\n          ElMessage.error('获取用户信息失败');\n        }\n      } catch (error) {\n        console.error(\"获取用户信息失败\", error);\n        ElMessage.error('获取用户信息失败');\n      }\n    };\n    onMounted(() => {\n      fetchAvatar();\n    });\n    // 监听路由变化以设置标签页标题\n    watch(() => router.currentRoute.value, newRoute => {\n      if (newRoute.path === '/PersonalPage') {\n        setPageTitle(`${user.value.username} 的个人主页 - 云联知渔`);\n      }\n    });\n    const __returned__ = {\n      setPageTitle,\n      router,\n      userId,\n      userName,\n      user,\n      currentComponent,\n      currentTab,\n      setTab,\n      back,\n      fetchAvatar,\n      ref,\n      onMounted,\n      watch,\n      AllCare,\n      AllLover,\n      get useRouter() {\n        return useRouter;\n      },\n      get ElMessage() {\n        return ElMessage;\n      },\n      get axios() {\n        return axios;\n      },\n      get PageTitle() {\n        return PageTitle;\n      }\n    };\n    Object.defineProperty(__returned__, '__isScriptSetup', {\n      enumerable: false,\n      value: true\n    });\n    return __returned__;\n  }\n};","map":{"version":3,"names":["ref","onMounted","watch","AllCare","AllLover","useRouter","ElMessage","axios","PageTitle","setPageTitle","router","userId","localStorage","getItem","userName","user","currentComponent","currentTab","setTab","value","back","push","fetchAvatar","response","get","data","code","msg","error","toString","console","currentRoute","newRoute","path","username"],"sources":["D:/有渔/前端源码/YouyuBBS-Q - 副本/youyu-lyn-qtnew-vision-new-2024.1.14/src/page/Personalpage/componentes/HeLove.vue"],"sourcesContent":["<template>\r\n    <div class=\"main\">\r\n        <div class=\"left_section\">\r\n            <div class=\"ta\">\r\n                <img src=\"@/assets/PersonalPage/TaCare.svg\" alt=\"\" class=\"carepic\">\r\n                <span class=\"text\">我的关注</span>\r\n            </div>\r\n            <div :class=\"{ allc: true, active: currentTab === 0 }\" @click=\"setTab(0)\">\r\n                <span class=\"text1\">全部关注</span>\r\n                <span class=\"text1\">{{ user.subscribeCount }}</span>\r\n            </div>\r\n            <div class=\"ta\">\r\n                <span class=\"line\"></span>\r\n                <img src=\"@/assets/PersonalPage/TaFans.svg\" alt=\"\" class=\"carepic\">\r\n                <span class=\"text\">我的粉丝</span>\r\n            </div>\r\n            <div :class=\"{ allc: true, active: currentTab === 1 }\" @click=\"setTab(1)\">\r\n                <span class=\"text1\">全部粉丝</span>\r\n                <span class=\"text1\">{{ user.fanCount }}</span>\r\n            </div>\r\n            <div class=\"ta\" @click=\"back\" style=\"cursor: pointer;\">\r\n                <span class=\"line\"></span>\r\n                <img src=\"@/assets/Back.svg\" alt=\"\" class=\"carepic\" >\r\n                <span class=\"text\" >返回个人中心</span>\r\n            </div>\r\n        </div>\r\n        \r\n        <div class=\"show\">\r\n            <component :is=\"currentComponent\"></component>\r\n        </div>\r\n    </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref,onMounted,watch } from 'vue';\r\nimport AllCare from \"../last/AllCare.vue\";\r\nimport AllLover from \"../last/AllLover.vue\";\r\nimport { useRouter } from 'vue-router';\r\nimport { ElMessage } from 'element-plus';\r\nimport axios from '@/utils/request';\r\nimport { PageTitle } from '@/utils/fileService.js'\r\n\r\nconst setPageTitle = PageTitle('正在加载...');\r\n\r\nconst router = useRouter();\r\nconst userId = localStorage.getItem(\"userId\"); // 获取用户ID\r\nconst userName = localStorage.getItem(\"userName\"); // 获取用户名\r\nconst user = ref({});\r\nconst currentComponent = ref(AllCare);  // 默认显示 AllCare 组件\r\nconst currentTab = ref(0); // 默认选中全部关注\r\n\r\nsetPageTitle(`${ userName } 的个人主页 - 云联知渔`); \r\n\r\nfunction setTab(value) {\r\n    if (value === 0) {\r\n    currentComponent.value = AllCare;\r\n    } else if (value === 1) {\r\n    currentComponent.value = AllLover;\r\n    }\r\n    currentTab.value = value; // 更新当前选中的选项\r\n}\r\n\r\nconst back = () => {\r\n    // 使用 router.push() 导航到 '/PersonalPage/helover'\r\n    router.push('/PersonalPage');\r\n};\r\n\r\n// 获取用户信息\r\nconst fetchAvatar = async () => {\r\n    try {\r\n        const response = await axios.get(`/users/${userId}`);\r\n        if(response.data.code === 1){\r\n            user.value = response.data.data;\r\n        }else if(response.data.code === 0 && response.data.msg){\r\n            ElMessage.error(response.data.msg.toString());\r\n        }else{\r\n            ElMessage.error('获取用户信息失败');\r\n        }\r\n    } catch (error) {\r\n        console.error(\"获取用户信息失败\", error);\r\n        ElMessage.error('获取用户信息失败');\r\n    }\r\n};\r\n\r\nonMounted(() => {\r\n    fetchAvatar();\r\n});\r\n// 监听路由变化以设置标签页标题\r\nwatch(() => router.currentRoute.value, (newRoute) => {\r\n    if (newRoute.path === '/PersonalPage') {\r\n        setPageTitle(`${ user.value.username} 的个人主页 - 云联知渔`);\r\n    }\r\n});\r\n</script>\r\n\r\n<style scoped>\r\n.main{\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: flex-start;\r\n  margin: 41px auto 0 auto;\r\n  width: 93%;\r\n}\r\n.left_section{\r\n  display: flex;\r\n  width: 180px;\r\n  flex-direction: column;\r\n  gap: 10px;\r\n}\r\n.ta{\r\n    position: relative;\r\n    margin-top: 12px;\r\n    display: flex;\r\n    padding: 10px 42px 3px 0px;\r\n    align-items: center;\r\n}\r\n.line{\r\n    position: absolute;\r\n    top: 0px;\r\n    left: 0px;\r\n    width: 180px;\r\n    height: 1px;\r\n    background: rgb(212, 212, 212);\r\n}\r\n.carepic{\r\n    width: 16px;\r\n    height: 16px;\r\n}\r\n.text{\r\n    color: #000;\r\n    text-align: center;\r\n    font-family: Microsoft YaHei;\r\n    font-size: 18px;\r\n    line-height: 120%;\r\n    margin-left: 10px;\r\n}\r\n.text1{\r\n    color: #6D757A;\r\n    text-align: center;\r\n    font-family: Microsoft YaHei;\r\n    font-size: 16px;\r\n    line-height: 120%;\r\n    margin-left: 27px;\r\n}\r\n.allc{\r\n    margin-top: 12px;\r\n    height: 19px;\r\n    padding: 8px 10px 8px 0px;\r\n    width: 170px;\r\n    border-radius: 4px;\r\n    display: flex;\r\n    justify-content: space-between;\r\n    cursor: pointer;\r\n}\r\n.active{\r\n    background: #9FA9CA;\r\n}\r\n.active .text1{\r\n    color: #000;\r\n}\r\n.show {\r\n    display: flex;\r\n    flex-direction: column;\r\n    align-items: flex-start;\r\n    width: 80%;\r\n    height: auto;\r\n}\r\n</style>\r\n"],"mappings":"AAkCA,SAASA,GAAG,EAACC,SAAS,EAACC,KAAK,QAAQ,KAAK;AACzC,OAAOC,OAAO,MAAM,qBAAqB;AACzC,OAAOC,QAAQ,MAAM,sBAAsB;AAC3C,SAASC,SAAS,QAAQ,YAAY;AACtC,SAASC,SAAS,QAAQ,cAAc;AACxC,OAAOC,KAAK,MAAM,iBAAiB;AACnC,SAASC,SAAS,QAAQ,wBAAwB;;;;;;;IAElD,MAAMC,YAAY,GAAGD,SAAS,CAAC,SAAS,CAAC;IAEzC,MAAME,MAAM,GAAGL,SAAS,CAAC,CAAC;IAC1B,MAAMM,MAAM,GAAGC,YAAY,CAACC,OAAO,CAAC,QAAQ,CAAC,CAAC,CAAC;IAC/C,MAAMC,QAAQ,GAAGF,YAAY,CAACC,OAAO,CAAC,UAAU,CAAC,CAAC,CAAC;IACnD,MAAME,IAAI,GAAGf,GAAG,CAAC,CAAC,CAAC,CAAC;IACpB,MAAMgB,gBAAgB,GAAGhB,GAAG,CAACG,OAAO,CAAC,CAAC,CAAE;IACxC,MAAMc,UAAU,GAAGjB,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC;;IAE3BS,YAAY,CAAE,GAAGK,QAAU,eAAc,CAAC;IAE1C,SAASI,MAAMA,CAACC,KAAK,EAAE;MACnB,IAAIA,KAAK,KAAK,CAAC,EAAE;QACjBH,gBAAgB,CAACG,KAAK,GAAGhB,OAAO;MAChC,CAAC,MAAM,IAAIgB,KAAK,KAAK,CAAC,EAAE;QACxBH,gBAAgB,CAACG,KAAK,GAAGf,QAAQ;MACjC;MACAa,UAAU,CAACE,KAAK,GAAGA,KAAK,CAAC,CAAC;IAC9B;IAEA,MAAMC,IAAI,GAAGA,CAAA,KAAM;MACf;MACAV,MAAM,CAACW,IAAI,CAAC,eAAe,CAAC;IAChC,CAAC;;IAED;IACA,MAAMC,WAAW,GAAG,MAAAA,CAAA,KAAY;MAC5B,IAAI;QACA,MAAMC,QAAQ,GAAG,MAAMhB,KAAK,CAACiB,GAAG,CAAE,UAASb,MAAO,EAAC,CAAC;QACpD,IAAGY,QAAQ,CAACE,IAAI,CAACC,IAAI,KAAK,CAAC,EAAC;UACxBX,IAAI,CAACI,KAAK,GAAGI,QAAQ,CAACE,IAAI,CAACA,IAAI;QACnC,CAAC,MAAK,IAAGF,QAAQ,CAACE,IAAI,CAACC,IAAI,KAAK,CAAC,IAAIH,QAAQ,CAACE,IAAI,CAACE,GAAG,EAAC;UACnDrB,SAAS,CAACsB,KAAK,CAACL,QAAQ,CAACE,IAAI,CAACE,GAAG,CAACE,QAAQ,CAAC,CAAC,CAAC;QACjD,CAAC,MAAI;UACDvB,SAAS,CAACsB,KAAK,CAAC,UAAU,CAAC;QAC/B;MACJ,CAAC,CAAC,OAAOA,KAAK,EAAE;QACZE,OAAO,CAACF,KAAK,CAAC,UAAU,EAAEA,KAAK,CAAC;QAChCtB,SAAS,CAACsB,KAAK,CAAC,UAAU,CAAC;MAC/B;IACJ,CAAC;IAED3B,SAAS,CAAC,MAAM;MACZqB,WAAW,CAAC,CAAC;IACjB,CAAC,CAAC;IACF;IACApB,KAAK,CAAC,MAAMQ,MAAM,CAACqB,YAAY,CAACZ,KAAK,EAAGa,QAAQ,IAAK;MACjD,IAAIA,QAAQ,CAACC,IAAI,KAAK,eAAe,EAAE;QACnCxB,YAAY,CAAE,GAAGM,IAAI,CAACI,KAAK,CAACe,QAAS,eAAc,CAAC;MACxD;IACJ,CAAC,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}