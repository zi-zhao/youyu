{"ast":null,"code":"import { createCommentVNode as _createCommentVNode, createElementVNode as _createElementVNode, createTextVNode as _createTextVNode, openBlock as _openBlock, createElementBlock as _createElementBlock, resolveComponent as _resolveComponent, createVNode as _createVNode, toDisplayString as _toDisplayString, withCtx as _withCtx, renderList as _renderList, Fragment as _Fragment, normalizeClass as _normalizeClass, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\";\nimport _imports_0 from '@/assets/QACenter/QuestionMark.svg';\nimport _imports_1 from '@/assets/TranspondGray.svg';\nimport _imports_2 from '@/assets/Report.svg';\nconst _withScopeId = n => (_pushScopeId(\"data-v-7d38f0ae\"), n = n(), _popScopeId(), n);\nconst _hoisted_1 = {\n  class: \"main-container\"\n};\nconst _hoisted_2 = {\n  class: \"content-container\"\n};\nconst _hoisted_3 = [\"innerHTML\"];\nconst _hoisted_4 = {\n  key: 0,\n  class: \"cover-box\"\n};\nconst _hoisted_5 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", {\n  class: \"hidden-part\"\n}, null, -1 /* HOISTED */));\nconst _hoisted_6 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"img\", {\n  style: {\n    \"margin-left\": \"5px\"\n  },\n  src: _imports_0,\n  alt: \"\"\n}, null, -1 /* HOISTED */));\nconst _hoisted_7 = {\n  key: 1,\n  style: {\n    \"position\": \"relative\"\n  }\n};\nconst _hoisted_8 = {\n  key: 0,\n  class: \"cover-box\",\n  style: {\n    \"z-index\": \"9\"\n  }\n};\nconst _hoisted_9 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", {\n  class: \"hidden-part\"\n}, null, -1 /* HOISTED */));\nconst _hoisted_10 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"img\", {\n  style: {\n    \"margin-left\": \"5px\"\n  },\n  src: _imports_0,\n  alt: \"\"\n}, null, -1 /* HOISTED */));\nconst _hoisted_11 = {\n  key: 2,\n  class: \"transshipment\"\n};\nconst _hoisted_12 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"span\", {\n  style: {\n    \"font-size\": \"0.8rem\",\n    \"color\": \"#9b9b9b\"\n  }\n}, \"本文转自\", -1 /* HOISTED */));\nconst _hoisted_13 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"img\", {\n  src: _imports_2,\n  alt: \"\",\n  style: {\n    \"width\": \"14px\",\n    \"height\": \"14px\"\n  }\n}, null, -1 /* HOISTED */));\nconst _hoisted_14 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"span\", null, \"文章举报\", -1 /* HOISTED */));\nconst _hoisted_15 = [_hoisted_13, _hoisted_14];\nconst _hoisted_16 = {\n  key: 3\n};\nconst _hoisted_17 = {\n  class: \"drawer-btn\"\n};\nconst _hoisted_18 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", {\n  class: \"custom-title-class\"\n}, \"文章目录\", -1 /* HOISTED */));\nconst _hoisted_19 = [\"id\", \"onClick\"];\nconst _hoisted_20 = {\n  class: \"centered-content\"\n};\nconst _hoisted_21 = {\n  key: 0,\n  class: \"flex-container\"\n};\nconst _hoisted_22 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"p\", null, \"支付\", -1 /* HOISTED */));\nconst _hoisted_23 = {\n  class: \"attachment-money\"\n};\nconst _hoisted_24 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"p\", null, \"个鱼饵以购买该文章\", -1 /* HOISTED */));\nconst _hoisted_25 = {\n  key: 1,\n  class: \"flex-container\"\n};\nconst _hoisted_26 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"p\", null, \"支付\", -1 /* HOISTED */));\nconst _hoisted_27 = {\n  class: \"attachment-money\"\n};\nconst _hoisted_28 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"p\", null, \"个渔币以购买该文章\", -1 /* HOISTED */));\nconst _hoisted_29 = {\n  class: \"button-container\"\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_v_md_editor = _resolveComponent(\"v-md-editor\");\n  const _component_el_link = _resolveComponent(\"el-link\");\n  const _component_DArrowLeft = _resolveComponent(\"DArrowLeft\");\n  const _component_el_icon = _resolveComponent(\"el-icon\");\n  const _component_el_button = _resolveComponent(\"el-button\");\n  const _component_el_drawer = _resolveComponent(\"el-drawer\");\n  const _component_Document = _resolveComponent(\"Document\");\n  const _component_el_dialog = _resolveComponent(\"el-dialog\");\n  return _openBlock(), _createElementBlock(_Fragment, null, [_createElementVNode(\"div\", _hoisted_1, [_createElementVNode(\"div\", _hoisted_2, [_createCommentVNode(\" 富文本编辑器获取到的内容 \"), _createElementVNode(\"div\", {\n    ref: \"container\",\n    innerHTML: _ctx.content,\n    class: \"html-content\"\n  }, null, 8 /* PROPS */, _hoisted_3), _createCommentVNode(\" 若未付费文章且用户未购买，则显示 \"), !$setup.showFullContent ? (_openBlock(), _createElementBlock(\"div\", _hoisted_4, [_hoisted_5, _createElementVNode(\"div\", {\n    class: \"expand-icon\",\n    onClick: _cache[0] || (_cache[0] = $event => $setup.purseArticleDialogVisible = true)\n  }, [_createTextVNode(\" 点击获取全部文章内容\"), _hoisted_6])])) : _createCommentVNode(\"v-if\", true), _createCommentVNode(\" markdown编辑器获取到的内容 \"), $setup.articleData.editorType === 1 ? (_openBlock(), _createElementBlock(\"div\", _hoisted_7, [_createVNode(_component_v_md_editor, {\n    \"model-value\": $setup.articleData.content,\n    mode: \"preview\"\n  }, null, 8 /* PROPS */, [\"model-value\"]), _createCommentVNode(\" 若未付费文章且用户未购买，则显示 \"), !$setup.showFullContent ? (_openBlock(), _createElementBlock(\"div\", _hoisted_8, [_hoisted_9, _createElementVNode(\"div\", {\n    class: \"expand-icon\",\n    style: {\n      \"height\": \"90%\"\n    },\n    onClick: _cache[1] || (_cache[1] = $event => $setup.purseArticleDialogVisible = true)\n  }, [_createTextVNode(\" 点击获取全部文章内容\"), _hoisted_10])])) : _createCommentVNode(\"v-if\", true)])) : _createCommentVNode(\"v-if\", true), $setup.articleData.type != 0 ? (_openBlock(), _createElementBlock(\"div\", _hoisted_11, [_hoisted_12, _createVNode(_component_el_link, {\n    href: $setup.articleData.originalArticle,\n    type: \"primary\",\n    target: \"_blank\"\n  }, {\n    default: _withCtx(() => [_createTextVNode(_toDisplayString($setup.articleData.originalArticle), 1 /* TEXT */)]),\n    _: 1 /* STABLE */\n  }, 8 /* PROPS */, [\"href\"])])) : _createCommentVNode(\"v-if\", true), _createCommentVNode(\" 转发 \"), _createElementVNode(\"div\", {\n    class: \"transpond\"\n  }, [_createElementVNode(\"img\", {\n    src: _imports_1,\n    style: {\n      \"width\": \"14px\",\n      \"height\": \"14px\"\n    },\n    onClick: $setup.copyCurrentUrl\n  }), _createElementVNode(\"span\", {\n    onClick: $setup.copyCurrentUrl\n  }, \"复制链接\")]), _createCommentVNode(\" 举报 \"), _createElementVNode(\"div\", {\n    class: \"report\",\n    onClick: _cache[2] || (_cache[2] = $event => $setup.dialogVisible = true)\n  }, [..._hoisted_15]), $setup.dialogVisible ? (_openBlock(), _createElementBlock(\"div\", _hoisted_16, [_createVNode($setup[\"AreportedDialog\"], {\n    modelValue: $setup.dialogVisible,\n    \"onUpdate:modelValue\": _cache[3] || (_cache[3] = $event => $setup.dialogVisible = $event),\n    id: $setup.articleId,\n    type: $setup.type\n  }, null, 8 /* PROPS */, [\"modelValue\", \"id\"])])) : _createCommentVNode(\"v-if\", true), _createCommentVNode(\" 文章目录和目录按钮 \"), _createElementVNode(\"div\", _hoisted_17, [_createVNode(_component_el_button, {\n    class: \"top-right-button\",\n    type: \"primary\",\n    onClick: _cache[4] || (_cache[4] = $event => $setup.drawer = true)\n  }, {\n    default: _withCtx(() => [_createVNode(_component_el_icon, null, {\n      default: _withCtx(() => [_createVNode(_component_DArrowLeft)]),\n      _: 1 /* STABLE */\n    })]),\n    _: 1 /* STABLE */\n  })]), _createVNode(_component_el_drawer, {\n    modelValue: $setup.drawer,\n    \"onUpdate:modelValue\": _cache[5] || (_cache[5] = $event => $setup.drawer = $event),\n    direction: $setup.direction,\n    modal: false,\n    \"lock-scroll\": false,\n    class: \"drawer\",\n    style: {\n      top: '40px'\n    }\n  }, {\n    title: _withCtx(() => [_hoisted_18]),\n    default: _withCtx(() => [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList($setup.menuList, (articlemenu, index) => {\n      return _openBlock(), _createElementBlock(\"div\", {\n        key: index\n      }, [_createElementVNode(\"span\", {\n        id: articlemenu.id,\n        class: _normalizeClass(articlemenu.level === 1 ? 'h1-class' : 'other-class'),\n        onClick: $event => $setup.scrollTo(articlemenu.id)\n      }, _toDisplayString(articlemenu.title), 11 /* TEXT, CLASS, PROPS */, _hoisted_19)]);\n    }), 128 /* KEYED_FRAGMENT */))]),\n    _: 1 /* STABLE */\n  }, 8 /* PROPS */, [\"modelValue\", \"direction\"])])]), _createVNode(_component_el_dialog, {\n    modelValue: $setup.purseArticleDialogVisible,\n    \"onUpdate:modelValue\": _cache[7] || (_cache[7] = $event => $setup.purseArticleDialogVisible = $event),\n    style: {\n      \"width\": \"40%\"\n    }\n  }, {\n    default: _withCtx(() => [_createElementVNode(\"div\", _hoisted_20, [_createVNode(_component_el_icon, null, {\n      default: _withCtx(() => [_createVNode(_component_Document)]),\n      _: 1 /* STABLE */\n    }), _createElementVNode(\"p\", null, _toDisplayString($setup.articleData.title), 1 /* TEXT */)]), $setup.articleCostType === 0 ? (_openBlock(), _createElementBlock(\"div\", _hoisted_21, [_hoisted_22, _createElementVNode(\"span\", _hoisted_23, _toDisplayString($setup.articleCost), 1 /* TEXT */), _hoisted_24])) : _createCommentVNode(\"v-if\", true), $setup.articleCostType === 1 ? (_openBlock(), _createElementBlock(\"div\", _hoisted_25, [_hoisted_26, _createElementVNode(\"span\", _hoisted_27, _toDisplayString($setup.articleCost), 1 /* TEXT */), _hoisted_28])) : _createCommentVNode(\"v-if\", true), _createElementVNode(\"div\", _hoisted_29, [_createVNode($setup[\"YyButton\"], {\n      theme: \"purple\",\n      style: {\n        \"padding\": \"6px 15px\"\n      },\n      onClick: $setup.loadFile\n    }, {\n      default: _withCtx(() => [_createTextVNode(\"确定支付\")]),\n      _: 1 /* STABLE */\n    }), _createVNode($setup[\"YyButton\"], {\n      theme: \"gray\",\n      style: {\n        \"padding\": \"6px 15px\"\n      },\n      onClick: _cache[6] || (_cache[6] = $event => $setup.purseArticleDialogVisible = false)\n    }, {\n      default: _withCtx(() => [_createTextVNode(\"取消\")]),\n      _: 1 /* STABLE */\n    })])]),\n    _: 1 /* STABLE */\n  }, 8 /* PROPS */, [\"modelValue\"])], 64 /* STABLE_FRAGMENT */);\n}","map":{"version":3,"names":["_imports_0","_imports_1","_imports_2","class","_createElementVNode","style","src","alt","_hoisted_13","_hoisted_14","_hoisted_1","_hoisted_2","_createCommentVNode","ref","innerHTML","_ctx","content","$setup","showFullContent","_createElementBlock","_hoisted_4","_hoisted_5","onClick","_cache","$event","purseArticleDialogVisible","_hoisted_6","articleData","editorType","_hoisted_7","_createVNode","_component_v_md_editor","mode","_hoisted_8","_hoisted_9","_hoisted_10","type","_hoisted_11","_hoisted_12","_component_el_link","href","originalArticle","target","copyCurrentUrl","dialogVisible","_hoisted_16","id","articleId","_hoisted_17","_component_el_button","drawer","_component_el_icon","_component_DArrowLeft","_component_el_drawer","direction","modal","top","title","_withCtx","_hoisted_18","_Fragment","_renderList","menuList","articlemenu","index","key","_normalizeClass","level","scrollTo","_hoisted_19","_component_el_dialog","_hoisted_20","_component_Document","_toDisplayString","articleCostType","_hoisted_21","_hoisted_22","_hoisted_23","articleCost","_hoisted_24","_hoisted_25","_hoisted_26","_hoisted_27","_hoisted_28","_hoisted_29","theme","loadFile"],"sources":["D:\\有渔\\前端源码\\YouyuBBS-Q - 副本\\youyu-lyn-qtnew-vision-new-2024.1.14\\src\\page\\TheArticle\\components\\ArticleContent.vue"],"sourcesContent":["<template>\r\n  <div class=\"main-container\">\r\n    <div class=\"content-container\">\r\n      <!-- 富文本编辑器获取到的内容 -->\r\n      <div ref=\"container\"  v-html=\"content\" class=\"html-content\"></div>\r\n      <!-- 若未付费文章且用户未购买，则显示 -->\r\n      <div v-if=\"!showFullContent\" class=\"cover-box\">\r\n        <div class=\"hidden-part\"></div>\r\n        <div class=\"expand-icon\" @click=\"purseArticleDialogVisible = true\">\r\n          点击获取全部文章内容<img style=\"margin-left: 5px;\" src=\"@/assets/QACenter/QuestionMark.svg\" alt=\"\">\r\n        </div>\r\n      </div>\r\n      <!-- markdown编辑器获取到的内容 -->\r\n      <div v-if=\"articleData.editorType === 1\" style=\"position: relative;\">\r\n        <v-md-editor :model-value=\"articleData.content\" mode=\"preview\"></v-md-editor>\r\n        <!-- 若未付费文章且用户未购买，则显示 -->\r\n        <div v-if=\"!showFullContent\" class=\"cover-box\" style=\"z-index: 9;\">\r\n          <div class=\"hidden-part\"></div>\r\n          <div class=\"expand-icon\" style=\"height: 90%;\" @click=\"purseArticleDialogVisible = true\">\r\n            点击获取全部文章内容<img style=\"margin-left: 5px;\" src=\"@/assets/QACenter/QuestionMark.svg\" alt=\"\">\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <div class=\"transshipment\" v-if=\"articleData.type!=0\" >\r\n          <span style=\"font-size: 0.8rem;color: #9b9b9b;\">本文转自</span>\r\n          <el-link :href=\"articleData.originalArticle\" type=\"primary\" target=\"_blank\">{{ articleData.originalArticle }}</el-link>\r\n      </div>\r\n      <!-- 转发 -->\r\n      <div class=\"transpond\">\r\n        <img  src=\"@/assets/TranspondGray.svg\" style=\"width: 14px;height: 14px;\" @click=\"copyCurrentUrl\">\r\n        <span @click=\"copyCurrentUrl\">复制链接</span>\r\n      </div>\r\n      <!-- 举报 -->\r\n      <div class=\"report\" @click=\"dialogVisible = true\">\r\n          <img src=\"@/assets/Report.svg\" alt=\"\" style=\"width: 14px;height: 14px;\">\r\n          <span>文章举报</span>\r\n      </div>\r\n      <div v-if=\"dialogVisible\">\r\n          <AreportedDialog v-model=\"dialogVisible\" :id = \"articleId\" :type = \"type\" ></AreportedDialog>\r\n      </div>\r\n        <!-- 文章目录和目录按钮 -->\r\n      <div class=\"drawer-btn\">\r\n        <el-button   \r\n          class=\"top-right-button\" \r\n          type=\"primary\" \r\n          @click=\"drawer = true\">\r\n          <el-icon><DArrowLeft /></el-icon>\r\n        </el-button>\r\n      </div>\r\n      <el-drawer\r\n        v-model=\"drawer\"\r\n        :direction=\"direction\"\r\n        :modal=\"false\"\r\n        :lock-scroll=\"false\"\r\n        class=\"drawer\"\r\n        :style=\"{ top: '40px' }\" \r\n      >\r\n          <template #title>\r\n            <div class=\"custom-title-class\">文章目录</div>\r\n          </template>\r\n          <div v-for=\"(articlemenu, index) in menuList\" :key=\"index\">\r\n            <span :id=\"articlemenu.id\" \r\n              :class=\"articlemenu.level === 1 ? 'h1-class' : 'other-class'\"\r\n              @click=\"scrollTo(articlemenu.id)\">\r\n              {{ articlemenu.title }}\r\n            </span>\r\n          </div>\r\n      </el-drawer>\r\n    </div>\r\n  </div>\r\n  <el-dialog v-model=\"purseArticleDialogVisible\" style=\"width: 40%;\">\r\n      <div class=\"centered-content\">\r\n        <el-icon><Document /></el-icon>\r\n        <p>{{ articleData.title }}</p>\r\n      </div>\r\n      <div v-if=\"articleCostType === 0 \"  class=\"flex-container\">\r\n        <p>支付</p>\r\n        <span class=\"attachment-money\">{{ articleCost }}</span>\r\n        <p>个鱼饵以购买该文章</p>\r\n      </div>\r\n      <div v-if=\"articleCostType === 1 \" class=\"flex-container\">\r\n        <p>支付</p>\r\n        <span class=\"attachment-money\">{{ articleCost }}</span>\r\n        <p>个渔币以购买该文章</p>\r\n      </div>\r\n      <div class=\"button-container\">\r\n        <YyButton theme=\"purple\" style=\"padding: 6px 15px;\" @click=\"loadFile\">确定支付</YyButton>\r\n        <YyButton theme=\"gray\" style=\"padding: 6px 15px;\" @click=\"purseArticleDialogVisible = false\">取消</YyButton>\r\n      </div>\r\n    </el-dialog>\r\n</template>\r\n\r\n<script setup>\r\nimport { ElMessage } from 'element-plus';\r\nimport { ref,onMounted, onBeforeUnmount,watchEffect} from 'vue';\r\nimport axios from '@/utils/request';\r\nimport AreportedDialog from '@/page/components/AreportedDialog.vue';\r\nimport { useRoute  } from 'vue-router'\r\nimport YyButton from \"@/page/components/YyButton.vue\";\r\n\r\nconst container = ref(null);//目录相关参数\r\nconst menuList = ref([]);//目录相关参数\r\nconst drawer = ref(false);//目录相关参数\r\nconst direction = ref('rtl');//目录相关参数\r\n\r\nconst type = 0;\r\nconst route = useRoute ();\r\nconst articleId = parseInt(route.params.id,10);//路径中的文章ID\r\nconst articleData = ref({})\r\nconst dialogVisible = ref(false);//控制文章举报弹框是否显示\r\nconst purseArticleDialogVisible = ref(false)//购买文章弹框\r\nconst articleCostType = ref();//购买文章所需货币类型\r\nconst articleCost = ref();//购买文章所需货币\r\nconst showFullContent = ref(false);\r\n\r\n//判断文章购买状态\r\nasync function deterArticlePurchase() {\r\n  try {\r\n    const response = await axios.get(`/article/purchaseLog/${articleId}`);\r\n    if (response.data.code === 1 && response.data.data === 1) {\r\n      showFullContent.value = true;\r\n    } else if(response.data.code === 0 && response.data.msg){\r\n        ElMessage.error(response.data.msg.toString());\r\n    }else {\r\n      console.error(response.data.msg || 'Unknown error');\r\n    }\r\n  } catch (error) {\r\n    console.error('判断文章购买状态失败', error.message);\r\n  }\r\n}\r\n\r\n//购买文章接口\r\nasync function loadFile() {\r\n  try {\r\n    const response = await axios.post(`/article/purchase/${articleId}`);\r\n    if (response.data.code === 1) {\r\n        ElMessage.success('购买文章成功');\r\n        showFullContent.value = true;\r\n        purseArticleDialogVisible.value = false\r\n        await fetchArticleContent(articleId);\r\n    } else if(response.data.code === 0 && response.data.msg){\r\n        ElMessage.error(response.data.msg.toString());\r\n    }else {\r\n      console.error('购买文章失败,未知的错误', response.data.msg || 'Unknown error');\r\n      ElMessage.error('购买文章失败，未知的错误');\r\n    }\r\n  } catch (error) {\r\n    console.error('购买文章失败，未知的错误', error.message);\r\n    ElMessage.error('购买文章失败，未知的错误');\r\n  }\r\n}\r\n\r\n//获取文章内容\r\nasync function fetchArticleContent(id) {\r\n  try {\r\n    const response = await axios.get(`/article/${id}`);\r\n    if ( response.data.code === 1) {\r\n      articleData.value =  response.data.data;\r\n      articleData.value.content = articleData.value.content.replace(/\\\\\"/g, '\"'); // 正确地替换掉转义的双引号\r\n      if(response.data.data.requiredCoin!= 0){\r\n        articleCostType.value = 1;\r\n        articleCost.value = response.data.data.requiredCoin;\r\n      }else if(response.data.data.requiredPoint!= 0){\r\n        articleCostType.value = 0;\r\n        articleCost.value = response.data.data.requiredPoint;\r\n      }else{\r\n        showFullContent.value = true;\r\n      }\r\n    } else if(response.data.code === 0 && response.data.msg){\r\n        ElMessage.error(response.data.msg.toString());\r\n    }else {\r\n    console.error('获取文章数据失败', response.data.msg || 'Unknown error');\r\n    ElMessage.error('获取文章数据失败');\r\n    }\r\n  } catch (error) {\r\n    console.error('网络错误:', error.message);\r\n    ElMessage.error('获取文章数据失败');\r\n  }\r\n}\r\n\r\n //文章转发的计数功能\r\n async function articleForward() {\r\n    try {\r\n      const queryParams = new URLSearchParams({\r\n        articleId: Number(articleId),\r\n      }).toString();\r\n      const response = await axios.post(`/article/forward?${queryParams}`);\r\n      if (response.data.code === 1) {\r\n        // ElMessage.success('文章转发成功')\r\n      } else if(response.data.code === 0 && response.data.msg){\r\n          ElMessage.error(response.data.msg.toString());\r\n      }else {\r\n        console.error('文章转发失败', response.data.msg || 'Unknown error');\r\n        ElMessage.error('文章转发失败');\r\n      }\r\n    } catch (error) {\r\n      console.error('文章转发失败:', error.message);\r\n      ElMessage.error('文章转发失败');\r\n    }\r\n  }\r\n\r\n  //复制链接的函数\r\n  function copyToClipboard(text) {\r\n    if (navigator.clipboard) {\r\n      navigator.clipboard.writeText(text).then(function() {\r\n        ElMessage.success('文章链接已复制到您的剪切板');\r\n        articleForward();\r\n      }, function(err) {\r\n        console.error('复制链接失败', err);\r\n        ElMessage.error('复制链接失败');\r\n      });\r\n    } else {\r\n      const textArea = document.createElement('textarea');\r\n      textArea.style.position = 'absolute';\r\n      textArea.style.left = '-9999px';\r\n      textArea.style.opacity = '0';\r\n      textArea.value = text;\r\n      document.body.appendChild(textArea);\r\n      textArea.focus();\r\n      textArea.select();\r\n      try {\r\n        const successful = document.execCommand('copy');\r\n        if(successful){\r\n          ElMessage.success('文章链接已复制到您的剪切板');\r\n          articleForward();\r\n        }else{\r\n          ElMessage.error('复制链接失败');\r\n        }\r\n      } catch (err) {\r\n        console.error('复制链接失败', err);\r\n        ElMessage.error('复制链接失败');\r\n      }\r\n      document.body.removeChild(textArea);\r\n    }\r\n  }\r\n\r\n\r\n  // 定义一个方法用于复制当前页面的URL\r\n  const copyCurrentUrl = () => {\r\n    copyToClipboard(window.location.href);\r\n  };\r\n\r\nconst tagToLevel = (tagName) => {\r\n  return parseInt(tagName.toLowerCase().replace(\"h\", \"\"));\r\n};\r\n\r\n  /**\r\n   * 遍历生成目录,这里多写一点注释，这里的目录生成和编辑器那里的目录生成有个很大的不同点\r\n   * 编辑器那里的目录里的内容直接由编辑器封装好的样式里拿，在那个页面应该被起名为content\r\n   * 而那个content本身就是一个DOM，所以可以用queryselectorall这个方法，很方便。\r\n   * 但是这个页面的content.value是一个HTML的字符串，必须先转化为DOM元素才能用queryselectorall方法\r\n   * 这里是在第九行代码的div中（展示文章内容的盒子）加入了ref container\r\n   */\r\nconst handlerMenu = () => {\r\n  if (container.value) {\r\n    const els = container.value.querySelectorAll(\"h1,h2,h3,h4,h5,h6\");\r\n    if (els) {\r\n      menuList.value = Array.from(els).map((item, index) => {\r\n        const id = `menus_${index + 1}`;\r\n        item.setAttribute(\"id\", id);\r\n        return {\r\n          isActive: null,\r\n          title: item.innerText,\r\n          scrollTop: item.offsetTop,\r\n          level: tagToLevel(item.tagName),\r\n          id: `#${id}`\r\n        };\r\n      });\r\n    }else{\r\n      console.error('content is not initialized or content.value is falsy');\r\n      ElMessage.error('生成目录失败');\r\n    }\r\n  }\r\n}\r\n\r\n//页面滚动接口\r\nconst scrollTo = (id) => {\r\n    const element = document.querySelector(id);\r\n    if (element) {\r\n      element.scrollIntoView({ behavior: 'smooth' });\r\n    }else{\r\n    ElMessage.error('滚动目录失败');\r\n    }\r\n};\r\n\r\nonMounted(() => {\r\n  deterArticlePurchase();\r\n  fetchArticleContent(articleId);\r\n  const stopWatchEffect = watchEffect(() => {\r\n    if (articleData.value.content && articleData.value.editorType === 0) {\r\n      container.value.innerHTML = articleData.value.content;\r\n      handlerMenu();\r\n    } else {\r\n      console.error('container.value is null');\r\n    }\r\n  });\r\n  onBeforeUnmount(() => {\r\n    stopWatchEffect();\r\n  });\r\n});\r\n\r\n\r\n</script>\r\n\r\n<style scoped>\r\n.main-container {\r\n  box-shadow: 0px 4px 8px 0px rgba(0, 0, 0, 0.25);\r\n  display: flex;\r\n  justify-content: space-between; \r\n  align-items: flex-start; \r\n  width: 1020px;\r\n  margin: 20px auto 0px;\r\n  padding: 30px 60px 50px;;\r\n  position: relative;\r\n}\r\n\r\n.content-container {\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 20px; \r\n  width: 100%;\r\n  position: relative;\r\n}\r\n.html-content{\r\n  width: 100%;\r\n}\r\n.cover-box{\r\n  width: 100%;\r\n  height: 65px;\r\n  position: absolute;\r\n  bottom: 28px;\r\n}\r\n.hidden-part{\r\n  height: 17%;\r\n  background: rgb(255 255 255 / 90%);\r\n}\r\n.expand-icon{\r\n  height: 83%;\r\n  cursor: pointer;\r\n  background: #fff;\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n  color: #3779c6;\r\n}\r\n.drawer-btn .el-button {\r\n    width: 22px;\r\n    height: 60px;\r\n    padding:3px;\r\n    background-color: #fff;\r\n    box-shadow: 0 0 10px rgb(0 0 0 / 15%);\r\n    border: none;\r\n}\r\n::v-deep .top-right-button .el-icon svg{\r\n  color: black !important;;\r\n}\r\n.top-right-button {\r\n  position: fixed; \r\n  top: 40%; \r\n  right: 0px; \r\n}\r\n.custom-title-class {\r\n  color: black; /* 修改标题颜色 */\r\n  font-size: 24px; /* 修改标题字体大小 */\r\n  font-family: '黑体', 'Heiti', sans-serif; /* 修改标题字体 */\r\n}\r\n\r\n.h1-class{\r\n  color: #595959;\r\n  font-size: 18px; /* 修改文本字体大小 */\r\n  line-height: 2;\r\n  font-family: '宋体', 'SongTi', sans-serif;\r\n  cursor: pointer;\r\n}\r\n\r\n.other-class{\r\n  color: #595959;\r\n  font-size: 18px; /* 修改文本字体大小 */\r\n  line-height: 1.5;\r\n  font-family: '宋体', 'SongTi', sans-serif;\r\n  padding-left: 20px;\r\n  cursor: pointer;\r\n}\r\n\r\n::v-deep .other-class::before {\r\n  content: '';  /* 没有内容 */\r\n  display: inline-block;\r\n  width: 3px;  /* 黑点的宽度 */\r\n  height: 3px;  /* 黑点的高度 */\r\n  background-color: #595959;  /* 黑点的颜色 */\r\n  border-radius: 50%;  /* 使黑点呈圆形 */\r\n  margin-right: 8px;  /* 与文本内容之间的间距 */\r\n  vertical-align: middle; /* 使黑点居中 */\r\n}\r\n\r\n::v-deep .h1-class::before {\r\n  content: '';  /* 没有内容 */\r\n  display: inline-block;\r\n  width: 6px;  /* 黑点的宽度 */\r\n  height: 6px;  /* 黑点的高度 */\r\n  background-color: #595959;  /* 黑点的颜色 */\r\n  border-radius: 50%;  /* 使黑点呈圆形 */\r\n  margin-right: 8px;  /* 与文本内容之间的间距 */\r\n  vertical-align: middle; /* 使黑点居中 */\r\n}\r\n.transshipment {\r\n    display: flex;\r\n    align-items: center;\r\n    gap: 0.5rem;\r\n    margin-bottom: -1rem;\r\n    margin: 2rem 0 -2rem;\r\n}\r\n:deep .el-link.el-link--primary,\r\n:deep .el-link__inner{\r\n    --el-link-text-color: #3779c9;\r\n    color: #3779c9;\r\n    font-size: 0.8rem;\r\n}\r\n.transpond{\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 5px;\r\n  cursor: pointer;\r\n  position: absolute;\r\n  right: -45px;\r\n  bottom: -22px;\r\n  margin-bottom: 0.3rem;\r\n}\r\n.report{\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 5px;\r\n  cursor: pointer;\r\n  position: absolute;\r\n  right: -45px;\r\n  bottom: -40px;\r\n}\r\n.report span,\r\n.transpond span{\r\n  color: #9B9B9B;\r\n  font-size: 12px;\r\n}\r\n:deep .el-drawer.rtl {\r\n  width: 30%;\r\n}\r\n/* 购买文章弹框 */\r\n.centered-content {\r\n  display: flex;\r\n  flex-direction: column; \r\n  align-items: center; \r\n}\r\n.flex-container {\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center; \r\n  gap: 5px;      \r\n  margin-bottom: 40px;    \r\n  margin-top: 20px;\r\n}\r\n.attachment-money{\r\n  font-weight: 700;\r\n  font-size: 20px;\r\n}\r\n.button-container {\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n  margin-top: 30px;\r\n  position: absolute;\r\n  right: 10px;\r\n  bottom: 10px;\r\n  gap: 15px;\r\n}\r\n@media (max-width:768px){\r\n  .main-container{\r\n      width: auto;\r\n      margin: 20px auto 0;\r\n      padding: 1rem 1rem 1.2rem;\r\n  }\r\n  :deep .el-drawer.rtl {\r\n    width: 90% !important;\r\n  }\r\n  .transpond{\r\n      right: 0.3rem;\r\n      bottom: 0.5rem;\r\n  }\r\n  .report{\r\n      right: 0.3rem;\r\n      bottom: -0.8rem;\r\n  }\r\n}\r\n</style>"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}