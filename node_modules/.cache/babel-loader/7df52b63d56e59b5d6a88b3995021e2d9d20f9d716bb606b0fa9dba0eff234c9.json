{"ast":null,"code":"import VideoPlay from \"@/page/components/VideoPlay.vue\";\nimport { ref, onMounted, onUnmounted, computed, watchEffect, watch } from 'vue';\nconst isLive = false;\nexport default {\n  __name: 'VideoText',\n  setup(__props, {\n    expose: __expose\n  }) {\n    __expose();\n    const showVideoPlayer = ref(true);\n    const poster = ref('https://youyu-bucket-1-1319554411.cos.ap-chengdu.myqcloud.com/%E7%94%9F%E6%88%90%E7%9A%84%E5%94%AF%E4%B8%80%E7%9A%84%E5%9B%BE%E7%89%87%E5%90%8D.jpg');\n    const autoplay = ref(false);\n    const url = ref();\n    const sources = computed(() => [{\n      type: \"video/mp4\",\n      // src:'https://youyu-bucket-1-1319554411.cos.ap-chengdu.myqcloud.com/%E5%B1%95%E7%A4%BA%E8%A7%86%E9%A2%91.mp4'\n      // src:\"https://vjs.zencdn.net/v/oceans.mp4\"\n      // src:\"https://youyu-bucket-1-1319554411.cos.ap-chengdu.myqcloud.com/%E3%80%90Re%20_make%E3%80%91%E7%88%86%E7%87%83%E6%B7%B7%E5%89%AA%EF%BD%9E%E8%BF%99%E4%B8%AA%E4%B8%96%E7%95%8C%E5%94%AF%E4%B8%80%E7%9A%84%E9%94%99%E8%AF%AF%E5%B0%B1%E6%98%AF%E4%B8%8E%E6%88%91%E4%B8%BA%E6%95%8C%EF%BC%81%20-%201.ONE%20OK%20ROCK%20%28%E3%83%AF%E3%83%B3%E3%82%AA%E3%82%AF%E3%83%AD%E3%83%83%E3%82%AF%29%20-%20Re_make%28Av200092745%2CP1%29.mp4\"\n      // src:'http://youyu-bucket-video4paper-invisible-1319554411.cos.ap-chengdu.myqcloud.com/paper/video/22/3/%E7%AC%AC%E4%B8%80%E5%A4%A7%E9%A2%98.mp4?q-sign-algorithm=sha1&q-ak=AKID1qY9YR6ZqthIhtrb8SyLUQSGqCLFwPfL&q-sign-time=1702215791%3B1702217591&q-key-time=1702215791%3B1702217591&q-header-list=host&q-url-param-list=&q-signature=9a6b5cf7d9119a99bd0edc5af4849896be972a6d',   \n      // src:'',\n      src: url.value\n    }]);\n    watch(url, (newValue, oldValue) => {\n      if (newValue !== oldValue) {\n        showVideoPlayer.value = false;\n        console.log(\"关闭！\");\n        setTimeout(() => {\n          console.log(\"启动！\");\n          console.log(url.value);\n          console.log(sources.value);\n          showVideoPlayer.value = true;\n        }, 1000); // 1秒后重新渲染子组件\n      }\n    });\n    // const blobUrl = ref();\n\n    // // 创建 Blob URL\n    // async function createBlobUrl(videoUrl) {\n    //   try {\n    //     const response = await fetch(videoUrl);//获取视频数据\n    //     const videoBlob = await response.blob();\n    //     if (videoBlob) {\n    //       blobUrl.value = URL.createObjectURL(videoBlob);\n    //       console.log(blobUrl.value);\n    //       sources.value = [{ type: \"video/mp4\", src: blobUrl.value }]; // 更新整个数组\n    //       open.value = true;\n    //     } else {\n    //       console.error(\"Failed to create Blob URL: videoBlob is undefined\");\n    //     }\n\n    //   } catch (error) {\n    //     console.error(\"Error creating Blob URL\", error); // 输出错误信息\n    //   }\n    // }\n\n    // // 撤销 Blob URL\n    // function revokeBlobUrl() {\n    //   URL.revokeObjectURL( blobUrl.value);\n    // }\n    url.value = \"https://vjs.zencdn.net/v/oceans.mp4\";\n\n    // // 使用 Blob URL\n    // onMounted(() => {\n    //   url.value = \"http://youyu-bucket-video4paper-invisible-1319554411.cos.ap-chengdu.myqcloud.com/paper/video/22/3/%E7%AC%AC%E4%B8%80%E5%A4%A7%E9%A2%98.mp4?q-sign-algorithm=sha1&q-ak=AKID1qY9YR6ZqthIhtrb8SyLUQSGqCLFwPfL&q-sign-time=1702215791%3B1702217591&q-key-time=1702215791%3B1702217591&q-header-list=host&q-url-param-list=&q-signature=9a6b5cf7d9119a99bd0edc5af4849896be972a6d\";\n    //   // createBlobUrl(\"http://youyu-bucket-video4paper-invisible-1319554411.cos.ap-chengdu.myqcloud.com/paper/video/22/3/%E7%AC%AC%E4%B8%80%E5%A4%A7%E9%A2%98.mp4?q-sign-algorithm=sha1&q-ak=AKID1qY9YR6ZqthIhtrb8SyLUQSGqCLFwPfL&q-sign-time=1702035721%3B1702037521&q-key-time=1702035721%3B1702037521&q-header-list=host&q-url-param-list=&q-signature=96697336b4479a12c7e619de76b2035e9486f7c5\");\n    //   // createBlobUrl(\"https://vjs.zencdn.net/v/oceans.mp4\");\n    //   // createBlobUrl(\"https://youyu-bucket-1-1319554411.cos.ap-chengdu.myqcloud.com/%E5%B1%95%E7%A4%BA%E8%A7%86%E9%A2%91.mp4\");\n    //   // window.addEventListener('unload', revokeBlobUrl);\n    // });\n\n    // onUnmounted(() => {\n    //   // 撤销 Blob URL\n    //   revokeBlobUrl();\n    // });\n\n    const __returned__ = {\n      showVideoPlayer,\n      isLive,\n      poster,\n      autoplay,\n      url,\n      sources,\n      VideoPlay,\n      ref,\n      onMounted,\n      onUnmounted,\n      computed,\n      watchEffect,\n      watch\n    };\n    Object.defineProperty(__returned__, '__isScriptSetup', {\n      enumerable: false,\n      value: true\n    });\n    return __returned__;\n  }\n};","map":{"version":3,"names":["VideoPlay","ref","onMounted","onUnmounted","computed","watchEffect","watch","isLive","showVideoPlayer","poster","autoplay","url","sources","type","src","value","newValue","oldValue","console","log","setTimeout"],"sources":["D:/有渔/前端源码/YouyuBBS-Q - 副本/youyu-lyn-qtnew-vision-new-2024.1.14/src/page/VideoText/VideoText.vue"],"sourcesContent":["<template>\r\n  <div style=\"width: 100%;height: 100%;background-color: #f2caca;\">\r\n    <div >\r\n      <VideoPlay \r\n      v-if=\"showVideoPlayer\"\r\n        :sources=\"sources\" \r\n        :isLive=\"isLive\" \r\n        :poster=\"poster\" \r\n        :autoplay=\"autoplay\">\r\n      </VideoPlay>\r\n    </div>\r\n  </div>\r\n</template>\r\n  \r\n<script setup>\r\nimport  VideoPlay  from \"@/page/components/VideoPlay.vue\";\r\nimport { ref,onMounted,onUnmounted,computed,watchEffect,watch} from 'vue';\r\n\r\nconst showVideoPlayer  = ref(true);\r\nconst isLive = (false);\r\nconst poster = ref('https://youyu-bucket-1-1319554411.cos.ap-chengdu.myqcloud.com/%E7%94%9F%E6%88%90%E7%9A%84%E5%94%AF%E4%B8%80%E7%9A%84%E5%9B%BE%E7%89%87%E5%90%8D.jpg');\r\nconst autoplay = ref(false);\r\nconst url = ref();\r\nconst sources = computed(() => [\r\n  {  \r\n    type: \"video/mp4\",\r\n    // src:'https://youyu-bucket-1-1319554411.cos.ap-chengdu.myqcloud.com/%E5%B1%95%E7%A4%BA%E8%A7%86%E9%A2%91.mp4'\r\n    // src:\"https://vjs.zencdn.net/v/oceans.mp4\"\r\n    // src:\"https://youyu-bucket-1-1319554411.cos.ap-chengdu.myqcloud.com/%E3%80%90Re%20_make%E3%80%91%E7%88%86%E7%87%83%E6%B7%B7%E5%89%AA%EF%BD%9E%E8%BF%99%E4%B8%AA%E4%B8%96%E7%95%8C%E5%94%AF%E4%B8%80%E7%9A%84%E9%94%99%E8%AF%AF%E5%B0%B1%E6%98%AF%E4%B8%8E%E6%88%91%E4%B8%BA%E6%95%8C%EF%BC%81%20-%201.ONE%20OK%20ROCK%20%28%E3%83%AF%E3%83%B3%E3%82%AA%E3%82%AF%E3%83%AD%E3%83%83%E3%82%AF%29%20-%20Re_make%28Av200092745%2CP1%29.mp4\"\r\n    // src:'http://youyu-bucket-video4paper-invisible-1319554411.cos.ap-chengdu.myqcloud.com/paper/video/22/3/%E7%AC%AC%E4%B8%80%E5%A4%A7%E9%A2%98.mp4?q-sign-algorithm=sha1&q-ak=AKID1qY9YR6ZqthIhtrb8SyLUQSGqCLFwPfL&q-sign-time=1702215791%3B1702217591&q-key-time=1702215791%3B1702217591&q-header-list=host&q-url-param-list=&q-signature=9a6b5cf7d9119a99bd0edc5af4849896be972a6d',   \r\n    // src:'',\r\n    src:url.value,\r\n  }\r\n]);\r\nwatch(url, (newValue, oldValue) => {\r\n  if (newValue !== oldValue) {\r\n    showVideoPlayer.value = false;\r\n    console.log(\"关闭！\");\r\n    setTimeout(() => {\r\n      console.log(\"启动！\");\r\n      console.log(url.value);\r\n      console.log(sources.value);\r\n      showVideoPlayer.value = true;\r\n    }, 1000); // 1秒后重新渲染子组件\r\n  }\r\n});\r\n// const blobUrl = ref();\r\n\r\n// // 创建 Blob URL\r\n// async function createBlobUrl(videoUrl) {\r\n//   try {\r\n//     const response = await fetch(videoUrl);//获取视频数据\r\n//     const videoBlob = await response.blob();\r\n//     if (videoBlob) {\r\n//       blobUrl.value = URL.createObjectURL(videoBlob);\r\n//       console.log(blobUrl.value);\r\n//       sources.value = [{ type: \"video/mp4\", src: blobUrl.value }]; // 更新整个数组\r\n//       open.value = true;\r\n//     } else {\r\n//       console.error(\"Failed to create Blob URL: videoBlob is undefined\");\r\n//     }\r\n\r\n//   } catch (error) {\r\n//     console.error(\"Error creating Blob URL\", error); // 输出错误信息\r\n//   }\r\n// }\r\n\r\n// // 撤销 Blob URL\r\n// function revokeBlobUrl() {\r\n//   URL.revokeObjectURL( blobUrl.value);\r\n// }\r\nurl.value = \"https://vjs.zencdn.net/v/oceans.mp4\";\r\n\r\n// // 使用 Blob URL\r\n// onMounted(() => {\r\n//   url.value = \"http://youyu-bucket-video4paper-invisible-1319554411.cos.ap-chengdu.myqcloud.com/paper/video/22/3/%E7%AC%AC%E4%B8%80%E5%A4%A7%E9%A2%98.mp4?q-sign-algorithm=sha1&q-ak=AKID1qY9YR6ZqthIhtrb8SyLUQSGqCLFwPfL&q-sign-time=1702215791%3B1702217591&q-key-time=1702215791%3B1702217591&q-header-list=host&q-url-param-list=&q-signature=9a6b5cf7d9119a99bd0edc5af4849896be972a6d\";\r\n//   // createBlobUrl(\"http://youyu-bucket-video4paper-invisible-1319554411.cos.ap-chengdu.myqcloud.com/paper/video/22/3/%E7%AC%AC%E4%B8%80%E5%A4%A7%E9%A2%98.mp4?q-sign-algorithm=sha1&q-ak=AKID1qY9YR6ZqthIhtrb8SyLUQSGqCLFwPfL&q-sign-time=1702035721%3B1702037521&q-key-time=1702035721%3B1702037521&q-header-list=host&q-url-param-list=&q-signature=96697336b4479a12c7e619de76b2035e9486f7c5\");\r\n//   // createBlobUrl(\"https://vjs.zencdn.net/v/oceans.mp4\");\r\n//   // createBlobUrl(\"https://youyu-bucket-1-1319554411.cos.ap-chengdu.myqcloud.com/%E5%B1%95%E7%A4%BA%E8%A7%86%E9%A2%91.mp4\");\r\n//   // window.addEventListener('unload', revokeBlobUrl);\r\n// });\r\n\r\n// onUnmounted(() => {\r\n//   // 撤销 Blob URL\r\n//   revokeBlobUrl();\r\n// });\r\n\r\n\r\n</script>\r\n\r\n<style scoped>\r\n\r\n</style>\r\n"],"mappings":"AAeA,OAAQA,SAAS,MAAO,iCAAiC;AACzD,SAASC,GAAG,EAACC,SAAS,EAACC,WAAW,EAACC,QAAQ,EAACC,WAAW,EAACC,KAAK,QAAO,KAAK;AAGzE,MAAMC,MAAM,GAAI,KAAM;;;;;;;IADtB,MAAMC,eAAe,GAAIP,GAAG,CAAC,IAAI,CAAC;IAElC,MAAMQ,MAAM,GAAGR,GAAG,CAAC,qJAAqJ,CAAC;IACzK,MAAMS,QAAQ,GAAGT,GAAG,CAAC,KAAK,CAAC;IAC3B,MAAMU,GAAG,GAAGV,GAAG,CAAC,CAAC;IACjB,MAAMW,OAAO,GAAGR,QAAQ,CAAC,MAAM,CAC7B;MACES,IAAI,EAAE,WAAW;MACjB;MACA;MACA;MACA;MACA;MACAC,GAAG,EAACH,GAAG,CAACI;IACV,CAAC,CACF,CAAC;IACFT,KAAK,CAACK,GAAG,EAAE,CAACK,QAAQ,EAAEC,QAAQ,KAAK;MACjC,IAAID,QAAQ,KAAKC,QAAQ,EAAE;QACzBT,eAAe,CAACO,KAAK,GAAG,KAAK;QAC7BG,OAAO,CAACC,GAAG,CAAC,KAAK,CAAC;QAClBC,UAAU,CAAC,MAAM;UACfF,OAAO,CAACC,GAAG,CAAC,KAAK,CAAC;UAClBD,OAAO,CAACC,GAAG,CAACR,GAAG,CAACI,KAAK,CAAC;UACtBG,OAAO,CAACC,GAAG,CAACP,OAAO,CAACG,KAAK,CAAC;UAC1BP,eAAe,CAACO,KAAK,GAAG,IAAI;QAC9B,CAAC,EAAE,IAAI,CAAC,CAAC,CAAC;MACZ;IACF,CAAC,CAAC;IACF;;IAEA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;;IAEA;IACA;IACA;IACA;;IAEA;IACA;IACA;IACA;IACAJ,GAAG,CAACI,KAAK,GAAG,qCAAqC;;IAEjD;IACA;IACA;IACA;IACA;IACA;IACA;IACA;;IAEA;IACA;IACA;IACA"},"metadata":{},"sourceType":"module","externalDependencies":[]}