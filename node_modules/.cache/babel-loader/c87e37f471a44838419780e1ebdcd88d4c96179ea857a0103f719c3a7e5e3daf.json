{"ast":null,"code":"import { resolveComponent as _resolveComponent, createVNode as _createVNode, withCtx as _withCtx, openBlock as _openBlock, createElementBlock as _createElementBlock, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\";\nconst _withScopeId = n => (_pushScopeId(\"data-v-db90326a\"), n = n(), _popScopeId(), n);\nconst _hoisted_1 = {\n  class: \"record\"\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_el_table_column = _resolveComponent(\"el-table-column\");\n  const _component_el_table = _resolveComponent(\"el-table\");\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_createVNode(_component_el_table, {\n    data: $setup.userCoinData,\n    style: {\n      \"width\": \"100%\"\n    }\n  }, {\n    default: _withCtx(() => [_createVNode(_component_el_table_column, {\n      prop: \"createTime\",\n      label: \"日期\",\n      width: \"160\"\n    }), _createVNode(_component_el_table_column, {\n      prop: \"currencyChange\",\n      label: \"变化量\",\n      width: \"100\"\n    }), _createVNode(_component_el_table_column, {\n      prop: \"reason\",\n      label: \"变化原因\",\n      width: \"500\"\n    })]),\n    _: 1 /* STABLE */\n  }, 8 /* PROPS */, [\"data\"])]);\n}","map":{"version":3,"names":["class","_createElementBlock","_hoisted_1","_createVNode","_component_el_table","data","$setup","userCoinData","style","_component_el_table_column","prop","label","width"],"sources":["D:\\有渔\\前端源码\\YouyuBBS-Q - 副本\\youyu-lyn-qtnew-vision-new-2024.1.14\\src\\page\\TheSettings\\Mypurse\\TheTable.vue"],"sourcesContent":["<template>\r\n    <div class=\"record\">\r\n      <el-table :data=\"userCoinData\" style=\"width: 100%\">\r\n      <el-table-column prop=\"createTime\" label=\"日期\" width=\"160\" />\r\n      <el-table-column prop=\"currencyChange\" label=\"变化量\" width=\"100\" />\r\n      <el-table-column prop=\"reason\" label=\"变化原因\" width=\"500\"/>\r\n    </el-table>\r\n    </div>\r\n</template>\r\n\r\n<script setup>\r\nimport {ref,onMounted,defineProps,watchEffect } from \"vue\";\r\nimport { ElMessage } from 'element-plus';\r\nimport axios from '@/utils/request';\r\nimport { convertDateFormat } from '@/utils/timeFormat'; \r\n\r\nconst props = defineProps({\r\n  selectdType: Number,\r\n});\r\n\r\nconst userId = ref('');\r\nconst userCoinData = ref([]);\r\n\r\n\r\nwatchEffect(() => {\r\n  switch(props.selectdType) {\r\n    case '0':\r\n      getUserPointChangeList();\r\n      break;\r\n    case '1':\r\n      getUserCoinChangeList();\r\n      break;\r\n    case '2':\r\n      getUserEnergyChangeList();\r\n      break;\r\n    case '3':\r\n      getUserExchange();\r\n      break;\r\n    default:\r\n      ElMessage.error('传参错误！')\r\n  }\r\n});\r\n//获取用户鱼饵数据变化列表\r\nasync function getUserPointChangeList() {\r\n  try{\r\n    const response = await axios.get(`/currency/point/page`, {\r\n        params: {\r\n            id:userId.value,\r\n            page:1,\r\n            pazeSize:100\r\n        }\r\n    });\r\n    if(response.data.code === 1){\r\n      userCoinData.value = response.data.data.records;\r\n      for(let record of userCoinData.value){\r\n        record.createTime = convertDateFormat(record.createTime);\r\n      }\r\n      // ElMessage.success('获取用户鱼饵数据变化列表成功');\r\n    }else if(response.data.code === 0 && response.data.msg){\r\n        ElMessage.error(response.data.msg.toString());\r\n    }else{\r\n      console.error(\"获取用户鱼饵数据变化列表失败\");\r\n      ElMessage.error('获取用户鱼饵数据变化列表失败');\r\n    }\r\n  } catch (error) {\r\n    console.error(\"获取用户鱼饵数据变化列表失败\", error); \r\n    ElMessage.error('获取用户鱼饵数据变化列表失败');\r\n  }\r\n}\r\n\r\n//获取用户渔币数据变化列表\r\nasync function getUserCoinChangeList() {\r\n  try{\r\n    const response = await axios.get(`/currency/coin/page`, {\r\n        params: {\r\n            id:userId.value,\r\n            page:1,\r\n            pazeSize:100\r\n        }\r\n    });\r\n    if(response.data.code === 1){\r\n      userCoinData.value = response.data.data.records;\r\n      for(let record of userCoinData.value){\r\n        record.createTime = convertDateFormat(record.createTime);\r\n      }\r\n      // ElMessage.success('获取用户渔币数据变化列表成功');\r\n    }else if(response.data.code === 0 && response.data.msg){\r\n        ElMessage.error(response.data.msg.toString());\r\n    }else{\r\n      console.error(\"获取用户渔币数据变化列表失败\");\r\n      ElMessage.error('获取用户渔币数据变化列表失败');\r\n    }\r\n  } catch (error) {\r\n    console.error(\"获取用户渔币数据变化列表失败\", error); \r\n    ElMessage.error('获取用户渔币数据变化列表失败');\r\n  }\r\n}\r\n\r\n//获取用户能量数据变化列表\r\nasync function getUserEnergyChangeList() {\r\n  try{\r\n    const response = await axios.get(`/currency/energy/page`, {\r\n        params: {\r\n            id:userId.value,\r\n            page:1,\r\n            pazeSize:100\r\n        }\r\n    });\r\n    if(response.data.code === 1){\r\n      userCoinData.value = response.data.data.records;\r\n      for(let record of userCoinData.value){\r\n        record.createTime = convertDateFormat(record.createTime);\r\n      }\r\n      // ElMessage.success('获取用户能量数据变化列表成功');\r\n    }else if(response.data.code === 0 && response.data.msg){\r\n        ElMessage.error(response.data.msg.toString());\r\n    }else{\r\n      console.error(\"获取用户能量数据变化列表失败\");\r\n      ElMessage.error('获取用户能量数据变化列表失败');\r\n    }\r\n  } catch (error) {\r\n    console.error(\"获取用户能量数据变化列表失败\", error); \r\n    ElMessage.error('获取用户能量数据变化列表失败');\r\n  }\r\n}\r\n\r\n\r\n\r\n//获取用户渔币兑换鱼饵变化列表\r\nasync function getUserExchange() {\r\n  try{\r\n    const response = await axios.get(`/currency/exchange`, {\r\n        params: {\r\n            page:1,\r\n            pazeSize:100\r\n        }\r\n    });\r\n    if(response.data.code === 1){\r\n      userCoinData.value = response.data.data.records;\r\n      for(let record of userCoinData.value){\r\n        record.createTime = convertDateFormat(record.createTime);\r\n        record.currencyChange = (record.exchangeCount)*10;\r\n        record.reason = '使用渔币兑换鱼饵'\r\n      }\r\n      // ElMessage.success('获取用户渔币数据变化列表成功');\r\n    }else if(response.data.code === 0 && response.data.msg){\r\n        ElMessage.error(response.data.msg.toString());\r\n    }else{\r\n      console.error(\"获取用户渔币数据变化列表失败\");\r\n      ElMessage.error('获取用户渔币数据变化列表失败');\r\n    }\r\n  } catch (error) {\r\n    console.error(\"获取用户渔币数据变化列表失败\", error); \r\n    ElMessage.error('获取用户渔币数据变化列表失败');\r\n  }\r\n}\r\n\r\n\r\n\r\nonMounted(() => {\r\n    userId.value = localStorage.getItem(\"userId\"); // 获取用户ID\r\n  })\r\n\r\n\r\n</script>\r\n\r\n<style scoped>\r\n\r\n.record {\r\n  margin: 16px 0px;\r\n  border-radius: 12px;\r\n}\r\n:deep .el-table .cell{\r\n  text-align: center;\r\n}\r\n::v-deep .el-table-v2__header-cell{\r\n  justify-content: center;\r\n  background-color: #FAFAFA;\r\n  border-top: 1px solid #EBEBEB;\r\n  border-left: 1px solid #EBEBEB;\r\n}\r\n::v-deep .el-table-v2__header-cell:first-child {\r\n    border-radius: 12px 0px 0px 0px;\r\n}\r\n::v-deep .el-table-v2__header-cell:last-child {\r\n    border-right: 1px solid #EBEBEB;\r\n    border-radius: 0px 12px 0px 0px;\r\n}\r\n::v-deep .el-table-v2__header-cell-text {\r\n    color: #5B5B5B;\r\n}\r\n</style>"],"mappings":";;;EACSA,KAAK,EAAC;AAAQ;;;;uBAAnBC,mBAAA,CAMM,OANNC,UAMM,GALJC,YAAA,CAISC,mBAAA;IAJEC,IAAI,EAAEC,MAAA,CAAAC,YAAY;IAAEC,KAAmB,EAAnB;MAAA;IAAA;;sBAC/B,MAA4D,CAA5DL,YAAA,CAA4DM,0BAAA;MAA3CC,IAAI,EAAC,YAAY;MAACC,KAAK,EAAC,IAAI;MAACC,KAAK,EAAC;QACpDT,YAAA,CAAiEM,0BAAA;MAAhDC,IAAI,EAAC,gBAAgB;MAACC,KAAK,EAAC,KAAK;MAACC,KAAK,EAAC;QACzDT,YAAA,CAAyDM,0BAAA;MAAxCC,IAAI,EAAC,QAAQ;MAACC,KAAK,EAAC,MAAM;MAACC,KAAK,EAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}