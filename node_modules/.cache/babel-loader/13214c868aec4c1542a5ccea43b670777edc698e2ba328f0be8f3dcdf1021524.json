{"ast":null,"code":"import { openBlock as _openBlock, createBlock as _createBlock, createCommentVNode as _createCommentVNode, createElementVNode as _createElementVNode, createElementBlock as _createElementBlock } from \"vue\";\nconst _hoisted_1 = {\n  style: {\n    \"width\": \"100%\",\n    \"height\": \"100%\",\n    \"background-color\": \"#f2caca\"\n  }\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_createElementVNode(\"div\", null, [$setup.showVideoPlayer ? (_openBlock(), _createBlock($setup[\"VideoPlay\"], {\n    key: 0,\n    sources: $setup.sources,\n    isLive: $setup.isLive,\n    poster: $setup.poster,\n    autoplay: $setup.autoplay\n  }, null, 8 /* PROPS */, [\"sources\", \"poster\", \"autoplay\"])) : _createCommentVNode(\"v-if\", true)])]);\n}","map":{"version":3,"names":["style","_createElementBlock","_hoisted_1","_createElementVNode","$setup","showVideoPlayer","_createBlock","sources","isLive","poster","autoplay"],"sources":["D:\\有渔\\前端源码\\YouyuBBS-Q - 副本\\youyu-lyn-qtnew-vision-new-2024.1.14\\src\\page\\VideoText\\VideoText.vue"],"sourcesContent":["<template>\r\n  <div style=\"width: 100%;height: 100%;background-color: #f2caca;\">\r\n    <div >\r\n      <VideoPlay \r\n      v-if=\"showVideoPlayer\"\r\n        :sources=\"sources\" \r\n        :isLive=\"isLive\" \r\n        :poster=\"poster\" \r\n        :autoplay=\"autoplay\">\r\n      </VideoPlay>\r\n    </div>\r\n  </div>\r\n</template>\r\n  \r\n<script setup>\r\nimport  VideoPlay  from \"@/page/components/VideoPlay.vue\";\r\nimport { ref,onMounted,onUnmounted,computed,watchEffect,watch} from 'vue';\r\n\r\nconst showVideoPlayer  = ref(true);\r\nconst isLive = (false);\r\nconst poster = ref('https://youyu-bucket-1-1319554411.cos.ap-chengdu.myqcloud.com/%E7%94%9F%E6%88%90%E7%9A%84%E5%94%AF%E4%B8%80%E7%9A%84%E5%9B%BE%E7%89%87%E5%90%8D.jpg');\r\nconst autoplay = ref(false);\r\nconst url = ref();\r\nconst sources = computed(() => [\r\n  {  \r\n    type: \"video/mp4\",\r\n    // src:'https://youyu-bucket-1-1319554411.cos.ap-chengdu.myqcloud.com/%E5%B1%95%E7%A4%BA%E8%A7%86%E9%A2%91.mp4'\r\n    // src:\"https://vjs.zencdn.net/v/oceans.mp4\"\r\n    // src:\"https://youyu-bucket-1-1319554411.cos.ap-chengdu.myqcloud.com/%E3%80%90Re%20_make%E3%80%91%E7%88%86%E7%87%83%E6%B7%B7%E5%89%AA%EF%BD%9E%E8%BF%99%E4%B8%AA%E4%B8%96%E7%95%8C%E5%94%AF%E4%B8%80%E7%9A%84%E9%94%99%E8%AF%AF%E5%B0%B1%E6%98%AF%E4%B8%8E%E6%88%91%E4%B8%BA%E6%95%8C%EF%BC%81%20-%201.ONE%20OK%20ROCK%20%28%E3%83%AF%E3%83%B3%E3%82%AA%E3%82%AF%E3%83%AD%E3%83%83%E3%82%AF%29%20-%20Re_make%28Av200092745%2CP1%29.mp4\"\r\n    // src:'http://youyu-bucket-video4paper-invisible-1319554411.cos.ap-chengdu.myqcloud.com/paper/video/22/3/%E7%AC%AC%E4%B8%80%E5%A4%A7%E9%A2%98.mp4?q-sign-algorithm=sha1&q-ak=AKID1qY9YR6ZqthIhtrb8SyLUQSGqCLFwPfL&q-sign-time=1702215791%3B1702217591&q-key-time=1702215791%3B1702217591&q-header-list=host&q-url-param-list=&q-signature=9a6b5cf7d9119a99bd0edc5af4849896be972a6d',   \r\n    // src:'',\r\n    src:url.value,\r\n  }\r\n]);\r\nwatch(url, (newValue, oldValue) => {\r\n  if (newValue !== oldValue) {\r\n    showVideoPlayer.value = false;\r\n    console.log(\"关闭！\");\r\n    setTimeout(() => {\r\n      console.log(\"启动！\");\r\n      console.log(url.value);\r\n      console.log(sources.value);\r\n      showVideoPlayer.value = true;\r\n    }, 1000); // 1秒后重新渲染子组件\r\n  }\r\n});\r\n// const blobUrl = ref();\r\n\r\n// // 创建 Blob URL\r\n// async function createBlobUrl(videoUrl) {\r\n//   try {\r\n//     const response = await fetch(videoUrl);//获取视频数据\r\n//     const videoBlob = await response.blob();\r\n//     if (videoBlob) {\r\n//       blobUrl.value = URL.createObjectURL(videoBlob);\r\n//       console.log(blobUrl.value);\r\n//       sources.value = [{ type: \"video/mp4\", src: blobUrl.value }]; // 更新整个数组\r\n//       open.value = true;\r\n//     } else {\r\n//       console.error(\"Failed to create Blob URL: videoBlob is undefined\");\r\n//     }\r\n\r\n//   } catch (error) {\r\n//     console.error(\"Error creating Blob URL\", error); // 输出错误信息\r\n//   }\r\n// }\r\n\r\n// // 撤销 Blob URL\r\n// function revokeBlobUrl() {\r\n//   URL.revokeObjectURL( blobUrl.value);\r\n// }\r\nurl.value = \"https://vjs.zencdn.net/v/oceans.mp4\";\r\n\r\n// // 使用 Blob URL\r\n// onMounted(() => {\r\n//   url.value = \"http://youyu-bucket-video4paper-invisible-1319554411.cos.ap-chengdu.myqcloud.com/paper/video/22/3/%E7%AC%AC%E4%B8%80%E5%A4%A7%E9%A2%98.mp4?q-sign-algorithm=sha1&q-ak=AKID1qY9YR6ZqthIhtrb8SyLUQSGqCLFwPfL&q-sign-time=1702215791%3B1702217591&q-key-time=1702215791%3B1702217591&q-header-list=host&q-url-param-list=&q-signature=9a6b5cf7d9119a99bd0edc5af4849896be972a6d\";\r\n//   // createBlobUrl(\"http://youyu-bucket-video4paper-invisible-1319554411.cos.ap-chengdu.myqcloud.com/paper/video/22/3/%E7%AC%AC%E4%B8%80%E5%A4%A7%E9%A2%98.mp4?q-sign-algorithm=sha1&q-ak=AKID1qY9YR6ZqthIhtrb8SyLUQSGqCLFwPfL&q-sign-time=1702035721%3B1702037521&q-key-time=1702035721%3B1702037521&q-header-list=host&q-url-param-list=&q-signature=96697336b4479a12c7e619de76b2035e9486f7c5\");\r\n//   // createBlobUrl(\"https://vjs.zencdn.net/v/oceans.mp4\");\r\n//   // createBlobUrl(\"https://youyu-bucket-1-1319554411.cos.ap-chengdu.myqcloud.com/%E5%B1%95%E7%A4%BA%E8%A7%86%E9%A2%91.mp4\");\r\n//   // window.addEventListener('unload', revokeBlobUrl);\r\n// });\r\n\r\n// onUnmounted(() => {\r\n//   // 撤销 Blob URL\r\n//   revokeBlobUrl();\r\n// });\r\n\r\n\r\n</script>\r\n\r\n<style scoped>\r\n\r\n</style>\r\n"],"mappings":";;EACOA,KAA2D,EAA3D;IAAA;IAAA;IAAA;EAAA;AAA2D;;uBAAhEC,mBAAA,CAUM,OAVNC,UAUM,GATJC,mBAAA,CAQM,cANEC,MAAA,CAAAC,eAAe,I,cADrBC,YAAA,CAMYF,MAAA;;IAJTG,OAAO,EAAEH,MAAA,CAAAG,OAAO;IAChBC,MAAM,EAAEJ,MAAA,CAAAI,MAAM;IACdC,MAAM,EAAEL,MAAA,CAAAK,MAAM;IACdC,QAAQ,EAAEN,MAAA,CAAAM"},"metadata":{},"sourceType":"module","externalDependencies":[]}