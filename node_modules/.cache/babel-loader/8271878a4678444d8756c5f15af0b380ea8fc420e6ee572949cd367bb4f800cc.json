{"ast":null,"code":"import TheInput from './TheInput.vue';\nimport TheAriticle from './TheAriticle.vue';\nimport { computed, ref, onMounted, reactive } from 'vue';\nimport axios from '@/utils/request';\nimport { useStore } from 'vuex';\nexport default {\n  __name: 'TheMiddle',\n  setup(__props, {\n    expose: __expose\n  }) {\n    __expose();\n    const store = useStore();\n    const board = reactive([]);\n    const subBoard = reactive([]); // 放置二级板块内容\n\n    //使用require导入图片静态资源\n    const darkImage = require('@/assets/TheMain/dark.png');\n    const lightImage = require('@/assets/TheMain/light.png');\n    let backgroundImage = ref(require('@/assets/TheMain/dark.png'));\n    const state = ref({\n      ids: []\n    });\n    const bgcurl = computed(() => {\n      return {\n        backgroundImage: 'url(\\'' + backgroundImage.value + '\\')'\n      };\n    });\n    onMounted(async () => {\n      //根据系统时间更换背景\n      let currentHour = new Date().getHours();\n      if (currentHour >= 18 || currentHour < 7) {\n        backgroundImage.value = darkImage; // 夜晚\n      } else {\n        backgroundImage.value = lightImage; // 白天的图片\n      }\n      try {\n        // 获取一级板块\n        const response = await axios.get('/board');\n        //  const response = await axios.get('/board?apifoxApiId=102350996')\n        for (let i = 0; i < response.data.data.length; i++) {\n          board.push({\n            name: response.data.data[i].name,\n            id: response.data.data[i].id\n          });\n          state.value.ids.push(response.data.data[i].id);\n        }\n        console.log(state.value);\n\n        // 根据一级板块获取二级板块\n        for (let i = 0; i < state.value.ids.length; i++) {\n          const subResponse = await axios.get(`/subboard/${state.value.ids[i]}`);\n          //     const subResponse = await axios.get(`/subboard/${state.value.ids[i]}?apifoxApiId=102356783`);\n          const currentSubBoard = []; // 新的二级板块数组\n          for (let j = 0; j < subResponse.data.data.length; j++) {\n            currentSubBoard.push({\n              name: subResponse.data.data[j].name,\n              id: subResponse.data.data[j].id\n            });\n          }\n          subBoard.push(currentSubBoard); // 将当前的二级板块数组推入到subboard中\n        }\n      } catch (error) {\n        console.log(error);\n      }\n    });\n\n    // 传送点击的二级板块id\n    function getId(id, name) {\n      store.commit('GETID', id);\n      store.commit('GETNAME', name);\n    }\n    const __returned__ = {\n      store,\n      board,\n      subBoard,\n      darkImage,\n      lightImage,\n      get backgroundImage() {\n        return backgroundImage;\n      },\n      set backgroundImage(v) {\n        backgroundImage = v;\n      },\n      state,\n      bgcurl,\n      getId,\n      TheInput,\n      TheAriticle,\n      computed,\n      ref,\n      onMounted,\n      reactive,\n      get axios() {\n        return axios;\n      },\n      get useStore() {\n        return useStore;\n      }\n    };\n    Object.defineProperty(__returned__, '__isScriptSetup', {\n      enumerable: false,\n      value: true\n    });\n    return __returned__;\n  }\n};","map":{"version":3,"names":["TheInput","TheAriticle","computed","ref","onMounted","reactive","axios","useStore","store","board","subBoard","darkImage","require","lightImage","backgroundImage","state","ids","bgcurl","value","currentHour","Date","getHours","response","get","i","data","length","push","name","id","console","log","subResponse","currentSubBoard","j","error","getId","commit"],"sources":["D:/有渔/前端源码/YouyuBBS-Q - 副本/youyu-lyn-qtnew-vision-new-2024.1.14/src/page/TheMain/components/TheMiddle.vue"],"sourcesContent":["<template>\r\n<div class=\"more\"     :style=\"bgcurl\">\r\n    <div class=\"large\">\r\n        <div class=\"tour\">\r\n            <!-- element弹出框插件 -->\r\n            <!-- :style=\"{backgroundImage: 'url('+backgroudImg+')'}\" -->\r\n            <el-popover placement=\"bottom\" :width=\"365\" trigger=\"hover\" v-for=\"(boardsource,index) in board\" :key=\"index\">\r\n                <!-- \r\n                    弹出框内容，根据循环的index确定渲染一级标签下的二级标签,\r\n                    这里已经实现了根据数据库中一级板块的数量动态构建popover模块,\r\n                    为实现这个效果构建了名为subboard的二维数组\r\n                    （好吧，其实reactive强大的类型转化功能让我觉得这玩意不能叫二维数组，就是个map）\r\n                    当然，我觉得还可以把一级板块和其对应的二级板块进行绑定，这样同样需要两个循环，\r\n                    目前来看和现在所用方法效率差别不大，只是逻辑上更合理一些。\r\n                    onmounted中就不做注释了，这里提及二维数组的概念后理解底下的内容就很简单。\r\n                -->\r\n                <div class=\"contain\">\r\n                    <div class=\"small\" v-for=\"(subBoardsource, sIdx) in subBoard[index]\" @click=\"getId(subBoardsource.id,subBoardsource.name)\" :key=\"sIdx\">\r\n                        <span >\r\n                            {{ subBoardsource.name }}\r\n                        </span>\r\n                    </div>\r\n                </div>\r\n                <!--\r\n                    补个注释：底下的板块是在显示一级板块文字\r\n                -->       \r\n                <template #reference>\r\n                    <div class=\"m-2\">\r\n                        {{ boardsource.name }}\r\n                    </div>\r\n                </template>\r\n            </el-popover>\r\n        </div>\r\n        <TheInput />\r\n        <TheAriticle />\r\n    </div>\r\n</div>\r\n\r\n    \r\n</template>\r\n\r\n<script setup>\r\nimport TheInput from './TheInput.vue'\r\nimport TheAriticle from './TheAriticle.vue'\r\nimport { computed,ref,onMounted,reactive} from 'vue'\r\nimport axios from '@/utils/request';\r\nimport { useStore } from 'vuex';\r\n\r\nconst store = useStore()\r\nconst board = reactive([])\r\nconst subBoard = reactive([]) // 放置二级板块内容\r\n    \r\n//使用require导入图片静态资源\r\nconst darkImage = require('@/assets/TheMain/dark.png');\r\nconst lightImage = require('@/assets/TheMain/light.png');\r\nlet backgroundImage = ref(require('@/assets/TheMain/dark.png'));\r\nconst state = ref({ids: []});\r\n\r\nconst bgcurl = computed(() => {\r\n        return { backgroundImage: 'url(\\'' + backgroundImage.value + '\\')' };\r\n    });\r\n        \r\n\r\nonMounted(async () => {\r\n    //根据系统时间更换背景\r\n    let currentHour = new Date().getHours();\r\n    if (currentHour >= 18 || currentHour < 7) {\r\n        backgroundImage.value = darkImage;  // 夜晚\r\n\r\n    } else {\r\n        backgroundImage.value = lightImage;  // 白天的图片\r\n    }\r\n    try {\r\n        // 获取一级板块\r\n        const response = await axios.get('/board')\r\n       //  const response = await axios.get('/board?apifoxApiId=102350996')\r\n        for (let i = 0; i < response.data.data.length; i++) {\r\n            board.push({\r\n                name: response.data.data[i].name,\r\n                id: response.data.data[i].id\r\n            });\r\n            state.value.ids.push(response.data.data[i].id);\r\n        }\r\n\r\n        console.log(state.value);\r\n\r\n        // 根据一级板块获取二级板块\r\n        for (let i = 0; i < state.value.ids.length; i++) {\r\n           const subResponse = await axios.get(`/subboard/${state.value.ids[i]}`);\r\n          //     const subResponse = await axios.get(`/subboard/${state.value.ids[i]}?apifoxApiId=102356783`);\r\n            const currentSubBoard = []; // 新的二级板块数组\r\n            for (let j = 0; j < subResponse.data.data.length; j++) {\r\n                currentSubBoard.push({\r\n                    name: subResponse.data.data[j].name,\r\n                    id: subResponse.data.data[j].id\r\n                });\r\n            }\r\n            subBoard.push(currentSubBoard); // 将当前的二级板块数组推入到subboard中\r\n        }\r\n    }catch (error) {\r\n        console.log(error);\r\n    }\r\n})\r\n\r\n// 传送点击的二级板块id\r\nfunction getId(id,name){\r\n    store.commit('GETID',id)\r\n    store.commit('GETNAME',name)\r\n}\r\n\r\n</script>\r\n\r\n<style scoped>\r\n.more{\r\n    width: 100%;\r\n    background-repeat: no-repeat;\r\n    background-size: 100% 500px;\r\n    margin-top: 40px;\r\n    z-index: -1;\r\n}\r\n.large{\r\n    position: relative;\r\n    z-index: 1;\r\n}\r\n/* 标签样式 */\r\n.tour{\r\n    padding: 60px 100px;\r\n    display: flex;\r\n    justify-content: space-between;\r\n    align-items: center;\r\n}\r\n/* 按钮样式 */\r\n.m-2{\r\n    font-family: Microsoft YaHei;\r\n    font-size: 32px;\r\n    font-style: normal;\r\n    font-weight: 700;\r\n    line-height: normal;\r\n    letter-spacing: 9.6px;\r\n    color: white !important; \r\n    position: relative;\r\n    margin-left: 0px;\r\n}\r\n.m-2::after {\r\n  content: attr(data-text);\r\n  position: absolute;\r\n  bottom: -150%;\r\n  transform: scaleY(-1);\r\n  color: white;\r\n  mask-image: linear-gradient(to top, rgba(254,254,254,0.2), rgba(254,254,254,0));\r\n  -webkit-mask-image: linear-gradient(to top, rgba(254,254,254,0.2), rgba(254,254,254,0));\r\n}\r\n.m-2:hover{\r\n    color: #ADB5DE !important;\r\n}\r\n/* a标签样式 */\r\n.contain{\r\n    display: flex;\r\n    flex-wrap: wrap;\r\n    align-items: center;\r\n    background-color: #F4F8FB;\r\n}\r\n.small{\r\n    align-items: center;\r\n    padding: 14px 26px;\r\n    margin: 2px 0px 10px 10px;\r\n    cursor: pointer;\r\n}\r\n.small span{\r\n    color: #000;\r\n    font-family: Microsoft YaHei;\r\n    font-size: 18px;\r\n    font-weight: 400;\r\n    text-decoration-line: underline;\r\n    text-decoration: none;\r\n    text-decoration-skip-ink:none;\r\n    padding-bottom: 2px;\r\n    display: inline-block;\r\n    transition: transform 0.5s ease;\r\n}\r\n/* 设置鼠标悬停样式 */\r\n.small:hover{\r\n    border-radius: 8px;\r\n    background: #8187A5;\r\n    box-shadow: 4px 4px 4px 0px rgba(0, 0, 0, 0.10);\r\n}\r\n.small:hover span{\r\n    color: #FDFBF6;\r\n    font-family: Microsoft YaHei;\r\n    font-size: 18px;\r\n    font-style: normal;\r\n    font-weight: 400;\r\n    line-height: normal;  \r\n    transform: translateY(-5px);\r\n}\r\n/* 对手机屏幕和小尺寸屏幕的样式调整 */\r\n@media (max-width: 768px) {\r\n    .more {\r\n        padding: 10px 0px; /* 增加一些内边距 */\r\n    }\r\n\r\n    .large {\r\n        margin: 20px 0; /* 调整边距 */\r\n    }\r\n\r\n    .tour {\r\n        padding: 20px 15px;\r\n        display: flex;\r\n        flex-wrap: wrap;\r\n    }\r\n\r\n    .m-2 {\r\n        font-size: 20px; \r\n        padding-left: 10px;\r\n        margin-bottom: 10px; \r\n    }\r\n    .m-2::after {\r\n        display: none;\r\n    }\r\n    .contain {\r\n        flex-direction: column; /* 列式布局 */\r\n    }\r\n\r\n    .small {\r\n        margin: 5px 0; /* 减少边距 */\r\n    }\r\n\r\n    .small span {\r\n        font-size: 16px; /* 减小字体大小 */\r\n    }\r\n}\r\n</style>"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}