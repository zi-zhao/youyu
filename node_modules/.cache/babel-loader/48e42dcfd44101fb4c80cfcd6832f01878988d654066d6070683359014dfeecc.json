{"ast":null,"code":"import { ref, onMounted } from 'vue';\nimport { useRoute } from 'vue-router';\nimport axios from '../../utils/request';\nimport PersonNav from './components/PersonNav.vue';\nimport ArticleContent from './components/ArticleContent.vue';\nimport AttachmentContent from './components/AttachmentContent.vue';\nimport MainPage from './components/MainPage.vue';\nimport UserComment from './components/UserComment.vue';\nimport { ElMessage } from 'element-plus';\nimport { PageTitle } from '@/utils/fileService.js';\nexport default {\n  __name: 'TheArticle',\n  setup(__props, {\n    expose: __expose\n  }) {\n    __expose();\n    const setPageTitle = PageTitle('正在加载...');\n    const route = useRoute();\n    const articleId = parseInt(route.params.id, 10); //路径中的文章ID\n    const title = ref();\n\n    //阅读文章接口\n    async function deterArticleRead() {\n      try {\n        await axios.post(`/article/read/${articleId}`);\n      } catch (error) {\n        console.error('阅读文章接口失败', error.message);\n      }\n    }\n\n    //获取文章内容\n    async function fetchArticleContent() {\n      try {\n        const response = await axios.get(`/article/${articleId}`);\n        if (response.data.code === 1) {\n          title.value = response.data.data.title;\n          setPageTitle(`${title.value} - 云联知渔`);\n        } else if (response.data.code === 0 && response.data.msg) {\n          ElMessage.error(response.data.msg.toString());\n        } else {\n          console.error('获取文章数据失败', response.data.msg || 'Unknown error');\n        }\n      } catch (error) {\n        console.error('网络错误:', error.message);\n      }\n    }\n    onMounted(() => {\n      fetchArticleContent();\n      deterArticleRead();\n    });\n    const __returned__ = {\n      setPageTitle,\n      route,\n      articleId,\n      title,\n      deterArticleRead,\n      fetchArticleContent,\n      ref,\n      onMounted,\n      get useRoute() {\n        return useRoute;\n      },\n      get axios() {\n        return axios;\n      },\n      PersonNav,\n      ArticleContent,\n      AttachmentContent,\n      MainPage,\n      UserComment,\n      get ElMessage() {\n        return ElMessage;\n      },\n      get PageTitle() {\n        return PageTitle;\n      }\n    };\n    Object.defineProperty(__returned__, '__isScriptSetup', {\n      enumerable: false,\n      value: true\n    });\n    return __returned__;\n  }\n};","map":{"version":3,"names":["ref","onMounted","useRoute","axios","PersonNav","ArticleContent","AttachmentContent","MainPage","UserComment","ElMessage","PageTitle","setPageTitle","route","articleId","parseInt","params","id","title","deterArticleRead","post","error","console","message","fetchArticleContent","response","get","data","code","value","msg","toString"],"sources":["D:/有渔/前端源码/YouyuBBS-Q - 副本/youyu-lyn-qtnew-vision-new-2024.1.14/src/page/TheArticle/TheArticle.vue"],"sourcesContent":["<template>\r\n  <div class=\"all\">\r\n    <PersonNav></PersonNav>\r\n    <ArticleContent></ArticleContent>\r\n    <AttachmentContent></AttachmentContent>\r\n    <MainPage></MainPage>\r\n    <UserComment></UserComment>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref,onMounted} from 'vue';\r\nimport { useRoute  } from 'vue-router'\r\nimport axios from '../../utils/request';\r\nimport PersonNav from './components/PersonNav.vue';\r\nimport ArticleContent from './components/ArticleContent.vue';\r\nimport AttachmentContent from './components/AttachmentContent.vue';\r\nimport MainPage from './components/MainPage.vue';\r\nimport UserComment from './components/UserComment.vue';\r\nimport { ElMessage } from 'element-plus';\r\nimport { PageTitle } from '@/utils/fileService.js'\r\n\r\nconst setPageTitle = PageTitle('正在加载...');\r\nconst route = useRoute ();\r\nconst articleId = parseInt(route.params.id,10);//路径中的文章ID\r\nconst title = ref();\r\n\r\n//阅读文章接口\r\nasync function deterArticleRead() {\r\n  try {\r\n    await axios.post(`/article/read/${articleId}`);\r\n  } catch (error) {\r\n    console.error('阅读文章接口失败', error.message);\r\n  }\r\n}\r\n\r\n//获取文章内容\r\nasync function fetchArticleContent() {\r\n  try {\r\n    const response = await axios.get(`/article/${articleId}`);\r\n    if (response.data.code === 1) {\r\n      title.value = response.data.data.title;\r\n      setPageTitle(`${title.value} - 云联知渔`);\r\n    } else if(response.data.code === 0 && response.data.msg){\r\n        ElMessage.error(response.data.msg.toString());\r\n    }else {\r\n      console.error('获取文章数据失败', response.data.msg || 'Unknown error');\r\n    }\r\n  } catch (error) {\r\n    console.error('网络错误:', error.message);\r\n  }\r\n}\r\n\r\nonMounted(() => {\r\n  fetchArticleContent();\r\n  deterArticleRead();\r\n});\r\n\r\n\r\n</script>\r\n\r\n<style scoped>\r\n.partial-content {\r\n  max-height: 30vh;\r\n  overflow: hidden;\r\n}\r\n.expand-icon {\r\n  cursor: pointer;\r\n  text-align: center; \r\n}\r\n.centered-content {\r\n  display: flex;\r\n  flex-direction: column; \r\n  align-items: center; \r\n}\r\n.flex-container {\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center; \r\n  gap: 5px;      \r\n  margin-bottom: 40px;    \r\n}\r\n.attachment-money{\r\n  font-weight: 700;\r\n  font-size: 20px;\r\n}\r\n.button-container {\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n  margin-top: 30px;\r\n  position: absolute;\r\n  right: 10px;\r\n  bottom: 10px;\r\n}\r\n.custom-button,\r\n.custom-button2 {\r\n  height: 30px;\r\n  padding: 0px 10px;\r\n  font-size: 16px;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  color: #fff;\r\n  border-radius: 8px;\r\n  background: #9FA9CA;\r\n  cursor: pointer;\r\n}\r\n</style>\r\n  "],"mappings":"AAWA,SAASA,GAAG,EAACC,SAAS,QAAO,KAAK;AAClC,SAASC,QAAQ,QAAS,YAAY;AACtC,OAAOC,KAAK,MAAM,qBAAqB;AACvC,OAAOC,SAAS,MAAM,4BAA4B;AAClD,OAAOC,cAAc,MAAM,iCAAiC;AAC5D,OAAOC,iBAAiB,MAAM,oCAAoC;AAClE,OAAOC,QAAQ,MAAM,2BAA2B;AAChD,OAAOC,WAAW,MAAM,8BAA8B;AACtD,SAASC,SAAS,QAAQ,cAAc;AACxC,SAASC,SAAS,QAAQ,wBAAwB;;;;;;;IAElD,MAAMC,YAAY,GAAGD,SAAS,CAAC,SAAS,CAAC;IACzC,MAAME,KAAK,GAAGV,QAAQ,CAAE,CAAC;IACzB,MAAMW,SAAS,GAAGC,QAAQ,CAACF,KAAK,CAACG,MAAM,CAACC,EAAE,EAAC,EAAE,CAAC,CAAC;IAC/C,MAAMC,KAAK,GAAGjB,GAAG,CAAC,CAAC;;IAEnB;IACA,eAAekB,gBAAgBA,CAAA,EAAG;MAChC,IAAI;QACF,MAAMf,KAAK,CAACgB,IAAI,CAAE,iBAAgBN,SAAU,EAAC,CAAC;MAChD,CAAC,CAAC,OAAOO,KAAK,EAAE;QACdC,OAAO,CAACD,KAAK,CAAC,UAAU,EAAEA,KAAK,CAACE,OAAO,CAAC;MAC1C;IACF;;IAEA;IACA,eAAeC,mBAAmBA,CAAA,EAAG;MACnC,IAAI;QACF,MAAMC,QAAQ,GAAG,MAAMrB,KAAK,CAACsB,GAAG,CAAE,YAAWZ,SAAU,EAAC,CAAC;QACzD,IAAIW,QAAQ,CAACE,IAAI,CAACC,IAAI,KAAK,CAAC,EAAE;UAC5BV,KAAK,CAACW,KAAK,GAAGJ,QAAQ,CAACE,IAAI,CAACA,IAAI,CAACT,KAAK;UACtCN,YAAY,CAAE,GAAEM,KAAK,CAACW,KAAM,SAAQ,CAAC;QACvC,CAAC,MAAM,IAAGJ,QAAQ,CAACE,IAAI,CAACC,IAAI,KAAK,CAAC,IAAIH,QAAQ,CAACE,IAAI,CAACG,GAAG,EAAC;UACpDpB,SAAS,CAACW,KAAK,CAACI,QAAQ,CAACE,IAAI,CAACG,GAAG,CAACC,QAAQ,CAAC,CAAC,CAAC;QACjD,CAAC,MAAK;UACJT,OAAO,CAACD,KAAK,CAAC,UAAU,EAAEI,QAAQ,CAACE,IAAI,CAACG,GAAG,IAAI,eAAe,CAAC;QACjE;MACF,CAAC,CAAC,OAAOT,KAAK,EAAE;QACdC,OAAO,CAACD,KAAK,CAAC,OAAO,EAAEA,KAAK,CAACE,OAAO,CAAC;MACvC;IACF;IAEArB,SAAS,CAAC,MAAM;MACdsB,mBAAmB,CAAC,CAAC;MACrBL,gBAAgB,CAAC,CAAC;IACpB,CAAC,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}