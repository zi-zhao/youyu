{"ast":null,"code":"import TheHeader from '../components/TheHeader.vue';\nimport axios from '@/utils/request';\nimport { ref, onMounted } from 'vue';\nexport default {\n  __name: 'MessageCenter',\n  setup(__props, {\n    expose: __expose\n  }) {\n    __expose();\n    const unreadStatus = ref({\n      SystemNote: true,\n      MyView: true,\n      LikeNotice: true,\n      CreateAritle: true,\n      MyFocus: true,\n      FocusMe: true,\n      MyMessage: true\n    });\n\n    // 点击隐藏未读消息的小红点\n    const markAsRead = item => {\n      unreadStatus.value[item] = false;\n    };\n    const data = ref([]);\n\n    //获取各个类别消息数目\n    async function getNotice() {\n      try {\n        const response = await axios.get('/notice');\n        if (response.data.code === 1) {\n          data.value = response.data.data;\n        } else {\n          console.error(\"获取各个类别消息数目失败\");\n        }\n      } catch (error) {\n        console.error(\"获取各个类别消息数目失败\", error);\n      }\n    }\n    onMounted(() => {\n      getNotice();\n    });\n    const __returned__ = {\n      unreadStatus,\n      markAsRead,\n      data,\n      getNotice,\n      TheHeader,\n      get axios() {\n        return axios;\n      },\n      ref,\n      onMounted\n    };\n    Object.defineProperty(__returned__, '__isScriptSetup', {\n      enumerable: false,\n      value: true\n    });\n    return __returned__;\n  }\n};","map":{"version":3,"names":["TheHeader","axios","ref","onMounted","unreadStatus","SystemNote","MyView","LikeNotice","CreateAritle","MyFocus","FocusMe","MyMessage","markAsRead","item","value","data","getNotice","response","get","code","console","error"],"sources":["D:/有渔/前端源码/YouyuBBS-Q - 副本/youyu-lyn-qtnew-vision-new-2024.1.14/src/page/MessageCenter/MessageCenter.vue"],"sourcesContent":["<template>\r\n    <TheHeader></TheHeader>\r\n    <div class=\"large\">\r\n        <div class=\"left\">\r\n            <div class=\"inner\">\r\n                <div class=\"first\">\r\n                    <img src=\"@/assets/MessageCenter/message.svg\" alt=\"\" class=\"message\">\r\n                    <span class=\"title\">消息中心</span>\r\n                </div>\r\n                <div class=\"next\" @click=\"markAsRead('SystemNote')\">\r\n                    <img src=\"@/assets/MessageCenter/one.svg\" alt=\"\">\r\n                    <router-link :to=\"{ name: 'SystemNote' }\" class=\"router\" active-class=\"active\" >系统通知</router-link>\r\n                    <div v-if=\" data[0] > 99\" class=\"unread-99\">\r\n                        {{ data[0] }}\r\n                    </div>\r\n                    <div v-if=\" data[0] <= 99 && data[0] != 0\" class=\"unread\">\r\n                        {{ data[0] }}\r\n                    </div>\r\n                </div>\r\n                <div class=\"next\" @click=\"markAsRead('MyView')\">\r\n                    <img src=\"@/assets/MessageCenter/two.svg\" alt=\"\">\r\n                    <router-link :to=\"{ name: 'MyView' }\" class=\"router\" active-class=\"active\" >评论我的</router-link>\r\n                    <div v-if=\" data[1] > 99 && unreadStatus.MyView\" class=\"unread-99\">\r\n                        {{ data[1] }}\r\n                    </div>\r\n                    <div v-if=\" data[1] <= 99 && data[1] != 0 && unreadStatus.MyView\" class=\"unread\">\r\n                        {{ data[1] }}\r\n                    </div>\r\n                </div>\r\n                <div class=\"next\" @click=\"markAsRead('LikeNotice')\">\r\n                    <img src=\"@/assets/LikeBefore.svg\" alt=\"\">\r\n                    <router-link :to=\"{ name: 'LikeNotice' }\" class=\"router\" active-class=\"active\" >点赞我的</router-link>\r\n                    <!-- 判断消息条数是否大于99，若不是，则只用unread类名即可，若大于，则需再加一个unread-99类名 -->\r\n                    <div v-if=\" data[2] > 99 && unreadStatus.LikeNotice\" class=\"unread-99\">\r\n                        {{ data[2] }}\r\n                    </div>\r\n                    <div v-if=\" data[2] <= 99 && data[2] != 0 && unreadStatus.LikeNotice\" class=\"unread\">\r\n                        {{ data[2] }}\r\n                    </div>\r\n                </div>\r\n                <div class=\"next\" @click=\"markAsRead('CreateAritle')\">\r\n                    <img src=\"@/assets/MessageCenter/three.svg\" alt=\"\">\r\n                    <router-link :to=\"{ name: 'CreateAritle' }\" class=\"router\" active-class=\"active\" >我的创作</router-link>\r\n                    <div v-if=\" data[3] > 99 && unreadStatus.CreateAritle\" class=\"unread-99\">\r\n                        {{ data[3] }}\r\n                    </div>\r\n                    <div v-if=\" data[3] <= 99 && data[3] != 0 && unreadStatus.CreateAritle\" class=\"unread\">\r\n                        {{ data[3] }}\r\n                    </div>\r\n                </div>\r\n                <div class=\"next\" @click=\"markAsRead('MyFocus')\">\r\n                    <img src=\"@/assets/MessageCenter/MyFocus.svg\" alt=\"\">\r\n                    <router-link :to=\"{ name: 'MyFocus' }\" class=\"router\" active-class=\"active\" >我的关注</router-link>\r\n                    <div v-if=\" data[4] > 99 && unreadStatus.MyFocus\" class=\"unread-99\">\r\n                        {{ data[4] }}\r\n                    </div>\r\n                    <div v-if=\" data[4] <= 99 && data[4] != 0 && unreadStatus.MyFocus\" class=\"unread\">\r\n                        {{ data[4] }}\r\n                    </div>\r\n                </div>\r\n                <div class=\"next\" @click=\"markAsRead('FocusMe')\">\r\n                    <img src=\"@/assets/MessageCenter/FocusMe.svg\" alt=\"\">\r\n                    <router-link :to=\"{ name: 'FocusMe' }\"  class=\"router\" active-class=\"active\">关注我的</router-link>\r\n                    <div v-if=\" data[5] > 99 && unreadStatus.FocusMe\" class=\"unread-99\">\r\n                        {{ data[5] }}\r\n                    </div>\r\n                    <div v-if=\" data[5] <= 99 && data[5] != 0 && unreadStatus.FocusMe\" class=\"unread\">\r\n                        {{ data[5] }}\r\n                    </div>\r\n                </div>\r\n                <!-- <div class=\"next\" @click=\"markAsRead('MyMessage')\">\r\n                    <img src=\"@/assets/MessageCenter/MyMessage.svg\" alt=\"\">\r\n                    <router-link :to=\"{ name: 'MyMessage' }\" class=\"router\" active-class=\"active\">我的消息</router-link>\r\n                    <div v-if=\" data[6] > 99 && unreadStatus.MyMessage\" class=\"unread-99\">\r\n                        {{ data[6] }}\r\n                    </div>\r\n                    <div v-if=\" data[6] <= 99 && data[6] != 0  && unreadStatus.MyMessage\" class=\"unread\">\r\n                        {{ data[6] }}\r\n                    </div>\r\n                </div> -->\r\n            </div>\r\n        </div>\r\n        <div class=\"right\">\r\n            <router-view></router-view>\r\n        </div>\r\n    </div>\r\n</template>\r\n\r\n\r\n<script setup>\r\nimport TheHeader from '../components/TheHeader.vue'\r\nimport axios from '@/utils/request';\r\nimport {ref,onMounted} from 'vue'\r\n\r\nconst unreadStatus = ref({\r\n  SystemNote: true,\r\n  MyView: true,\r\n  LikeNotice: true,\r\n  CreateAritle: true,\r\n  MyFocus: true,\r\n  FocusMe: true,\r\n  MyMessage: true\r\n});\r\n\r\n// 点击隐藏未读消息的小红点\r\nconst markAsRead = (item) => {\r\n  unreadStatus.value[item] = false;\r\n};\r\n    \r\nconst data = ref([]);\r\n\r\n//获取各个类别消息数目\r\nasync function getNotice() {\r\n    try {\r\n        const response = await axios.get('/notice');\r\n        if(response.data.code === 1){\r\n            data.value = response.data.data;\r\n        }else{\r\n            console.error(\"获取各个类别消息数目失败\");\r\n        }\r\n    } catch (error) {\r\n        console.error(\"获取各个类别消息数目失败\", error); \r\n    }\r\n}\r\n\r\nonMounted(() => {\r\n    getNotice();\r\n})\r\n</script>\r\n\r\n<style scoped>\r\n.large{\r\n    display: flex;\r\n}\r\n.large::-webkit-scrollbar {\r\n    width: 0px; \r\n}\r\n.left{\r\n    width: 18vw;\r\n    display: inline-block;\r\n    margin-top: 40px;\r\n}\r\n.inner{\r\n    width: 150px;\r\n    margin: 36px auto;\r\n    display: flex;\r\n    flex-direction: column;\r\n    align-items: center;\r\n    gap: 10px;\r\n}\r\n.message{\r\n    width: 24px;\r\n    height: 24px;\r\n}\r\n.title{\r\n    color: #000;\r\n    text-align: center;\r\n    font-family: Microsoft YaHei;\r\n    font-size: 20px;\r\n    font-style: normal;\r\n    font-weight: 700;\r\n    line-height: 120%; /* 24px */\r\n}\r\n.router{\r\n    color: #6B757B;\r\n    text-align: center;\r\n    font-weight: 700;\r\n    line-height: 120%; \r\n    text-decoration: none;\r\n    margin-left: 8px;\r\n    display: block;\r\n}\r\n.first{\r\n    margin-bottom: 40px;\r\n    display: flex;\r\n}\r\n.next{\r\n    margin-bottom: 30px;\r\n    display: flex;\r\n    align-items: flex-end;\r\n    flex-wrap: wrap;\r\n    position: relative;\r\n}\r\n.active{\r\n    color: #1E8FC2;\r\n}\r\n.right{\r\n    display: flex;\r\n    align-items: flex-start;\r\n}\r\n\r\n.next-container{\r\n    margin: auto;\r\n    padding: 5px 0 0 0;\r\n}\r\n.next-container a{\r\n    display: block;\r\n    margin-top: 8px;\r\n}\r\n.unread,\r\n.unread-99{\r\n    position: absolute;\r\n    top: -7px;\r\n    height: 16px;\r\n    font-size: 9px;\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n    background-color: #ff5757;\r\n    color: #fff;\r\n    font-weight: 700;\r\n}\r\n.unread{\r\n    width: 16px;\r\n    border-radius: 50%;\r\n    right: -18px;\r\n}\r\n.unread-99{\r\n    width: 26px;\r\n    border-radius: 50%;\r\n    right: -28px;\r\n}\r\n@media (max-width: 768px) {\r\n    .left{\r\n        width: 200px;\r\n    }\r\n}\r\n</style>"],"mappings":"AA0FA,OAAOA,SAAS,MAAM,6BAA6B;AACnD,OAAOC,KAAK,MAAM,iBAAiB;AACnC,SAAQC,GAAG,EAACC,SAAS,QAAO,KAAK;;;;;;;IAEjC,MAAMC,YAAY,GAAGF,GAAG,CAAC;MACvBG,UAAU,EAAE,IAAI;MAChBC,MAAM,EAAE,IAAI;MACZC,UAAU,EAAE,IAAI;MAChBC,YAAY,EAAE,IAAI;MAClBC,OAAO,EAAE,IAAI;MACbC,OAAO,EAAE,IAAI;MACbC,SAAS,EAAE;IACb,CAAC,CAAC;;IAEF;IACA,MAAMC,UAAU,GAAIC,IAAI,IAAK;MAC3BT,YAAY,CAACU,KAAK,CAACD,IAAI,CAAC,GAAG,KAAK;IAClC,CAAC;IAED,MAAME,IAAI,GAAGb,GAAG,CAAC,EAAE,CAAC;;IAEpB;IACA,eAAec,SAASA,CAAA,EAAG;MACvB,IAAI;QACA,MAAMC,QAAQ,GAAG,MAAMhB,KAAK,CAACiB,GAAG,CAAC,SAAS,CAAC;QAC3C,IAAGD,QAAQ,CAACF,IAAI,CAACI,IAAI,KAAK,CAAC,EAAC;UACxBJ,IAAI,CAACD,KAAK,GAAGG,QAAQ,CAACF,IAAI,CAACA,IAAI;QACnC,CAAC,MAAI;UACDK,OAAO,CAACC,KAAK,CAAC,cAAc,CAAC;QACjC;MACJ,CAAC,CAAC,OAAOA,KAAK,EAAE;QACZD,OAAO,CAACC,KAAK,CAAC,cAAc,EAAEA,KAAK,CAAC;MACxC;IACJ;IAEAlB,SAAS,CAAC,MAAM;MACZa,SAAS,CAAC,CAAC;IACf,CAAC,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}